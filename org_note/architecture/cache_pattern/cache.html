<!DOCTYPE HTML>
<html xmlns:ng="http://angularjs.org" id="ng-app" lang="en" ng-app="TH">
<body>
 <div class="dz-intro">Over a million developers have joined DZone.</div>
                <div class="mobile-invisible sign-in-join" ng-if="!$root.user.authenticated"><a href="#" ng-click="login()">Log In</a> <span class="dz-intro-span">/</span> <a href="#" ng-click="signIn()">Join</a></div>
                <div class="join-icon mobile-invisible"><i class="icon-user" ng-if="!$root.user.authenticated" ng-click="login()"></i></div>
                <div class="join-icon mobile-visible" ng-cloak><img src="/themes/dz20/images/DZone_MobileLogin2.png" class="mobile-visible" ng-if="!$root.user.authenticated" ng-click="login()"></div>
                <div class="headerSearch">
                    <span class="icon-search dropdown-toggle" ng-click="focusSearch()" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></span>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                        <li>
                            <form class="form-wrapper">
                                <input id="search" ng-model="searchT" type="text" placeholder="Search" required>
                                <input type="button" value="Search" class="btn btn-action" ng-click="allResults()" ng-disabled="searchT.length < 3">
                            </form>
                        </li>
                        <div class="results-area" ng-cloak>
                            <div class="col-md-12"><th-loader flag="loading"></th-loader></div>
                            <li ng-repeat="node in nodes">
                                <div class="results-container">
                                    <img dz-image-fid-width="80" dz-image-fid="{{ node.thumb }}">
                                    <a class="title" target="{{ node.type=='link'? '_blank' : '_self'}}" ng-href="{{node.urlOrigin}}">{{node.title}}</a>
                                    <p class="source">
                                        <span class="type">{{node.type}}</span>
                                        <span class="source-bullet"> &middot;</span>
                                        <span ng-if="node.type=='link'" class="link-source">{{ node.urlSource.name }}</span>
                                        <span ng-if="node.type=='link'" class="source-bullet"> &middot;</span>
                                        <span class="source-date" am-time-ago="node.articleDate"></span>
                                        <span ng-if="node.type != 'guide'">
                                            by <a href="{{ node.authors[0].url }}" target="_blank" class="author-name" th-popup="users.profile.mini" popup-data="{user: node.authors[0].id}">{{node.authors[0].realName }}</a>
                                        </span>
                                    </p>
                                    <div class="hover-buttons" ng-if="node.type=='refcard'">
                                        <a type="button" class="btn download" href="{{node.pdf}}"><i class="icon-download"></i> Download</a>
                                        <dz-save template="refcard-save.html" node="node" class="save-btn"></dz-save>
                                        <span class="download-count"><i class="icon-download"></i> {{node.downloads}}</span>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                            </li>
                        </div>

                        <div class="totalResults" ng-if="totalResults"><span>{{totalResults}} search results</span></div>
                        <li class="btn-vall" ng-if="haveResults">
                            <input type="button" value="View All Results" ng-click="allResults()" class="btn btn-action" ng-disabled="searchT.length < 3">
                        </li>

                    </ul>
                </div>

        </div>
    </div>
</div>

</div></div></div><div class="container-fluid body" th-element="body" th-element-groups="[]" ng-hide="$root.isHidden('body')" data-th-element-name="body"><div class="row mainContentRow fixContentRight" th-element="mainContentRow" th-element-groups="['body']" ng-hide="$root.isHidden('mainContentRow')" data-th-element-name="mainContentRow"><div class="col-md-12 announcementBar1 announcementBar oUhbYlrRaqMaoUhM" th-element="announcementBar1" th-element-groups="['body','mainContentRow']" ng-hide="$root.isHidden('announcementBar1')" data-th-element-name="announcementBar1" data-th-widget="announcementBar" data-widget-announcement-bar="" ng-controller="announcementBar1"><div ng-if="announcement && toShow" back-img hasImage="{{announcement.hasImage}}" img="{{announcement.img}}" imgBackup="{{announcement.img2}}" id="acontainer" class="ann-container" ng-cloak>
    <div class="ann-body">{{announcement.body}}</div><a ng-if="announcement.link" class="ann-link" ng-click="track(announcement.id)" ng-ref="{{announcement.link}}">{{announcement.title}}<span class="icon-right-dir"></span></a>
</div>
</div><div class="col-md-12 articleContent2 articleContent oUhbblYOaqbcblYOaqbcC" th-element="articleContent2" th-element-groups="['body','mainContentRow']" ng-hide="$root.isHidden('articleContent2')" data-th-element-name="articleContent2" data-th-widget="article.content" data-widget-article-content="" header-change-trigger="" ng-controller="articleContent2">
<script type="text/ng-template" id="like-article.html">
        <div class="dz-like"
             ng-class='{liked: status.liked}'
             ng-click='like()'

<a href="#">
    <i ng-class="{'icon-thumbs-up-alt': status.liked, 'icon-thumbs-up liked': !status.liked}"></i>
    <span>Like ({{ status.score }})</span>
</a>
</div>
</script>

<script type="text/ng-template" id="link-article-save.html">
    <div class="save "
         ng-class="{'icon-star gold': status.saved, 'icon-star-empty': !status.saved}"
         ng-click="save()"><span
                class="action-label">
                {{ status.saved ? 'Saved' : 'Save' }}</span></div>
</script>

<script type="text/ng-template" id="like-article.html">
    <div class="dz-like" ng-class="{'icon-thumbs-up-alt liked': status.liked, 'icon-thumbs-up': !status.liked}" ng-click="like()"><span class="action-label"><span>Like</span><span ng-if="status.liked" class="d-letter">d</span></span>
        <a href="#">
            <span>({{ status.score }})</span>
        </a>
    </div>
</script>

<div class="articles-wrap" ng-if="articles[0].id == 2870069">
        <div ng-if="ads.top.show() && articles[0].readyForAd"
             class="ad-container">
            <div dc-slot="ads.top.slot()" tags="ads.top.tags(articles[0])" size="ads.top.size()"></div>
        </div>


    <div>
        <th-if-scroll relative-to="top" from="0" to="50" callback="activateT(articles[0])"></th-if-scroll>
    </div>


    <div class="article-stream widget-top-border"
         ng-class="{'widget-top-border': articles[0].published }"
         itemscope
         itemtype="https://schema.org/Article"
         ng-if="articles[0].id == 2870069">
    <div class="social-media-icons mobile-only" follow-dzone><div class="top-social">
    <p>Let's be friends:</p>
    <ul class="icons-only" ng-class="{open: isOpen}" click-outside="outside()">
        <li class="rss-icon" id="rss-spotlight-1">
            <a href="/pages/feeds"><i class="icon-rss-1"></i></a>
        </li>
        <li class="twitter-icon">
            <a href="https://twitter.com/DZoneInc" target="_blank"><i class="icon-twitter"></i></a>
        </li>
        <li class="facebook-icon">
            <a href="https://www.facebook.com/DZoneInc" target="_blank"><i class="icon-facebook-1"></i></a>
        </li>
        <li class="google-icon">
            <a href="https://plus.google.com/+dzone/posts" target="_blank"><i class="icon-gplus"></i></a>
        </li>
        <li class="linkedin-icon">
            <a href="https://www.linkedin.com/company/devada-team" target="_blank"><i class="icon-linkedin-1"></i></a>
        </li>

    </ul>
</div>
</div>
        <div ng-if="!edition || (width > 1024 && edition)" class="content-right-images"
             header-affix-element="div.content">

           <!--Sponsor Logo-->
                 <div class="sidebar-ad" ng-if="articles[0].readyForAd" dc-slot="ads.sl1.slot(articles[0], 0)"
                 tags="ads.sl1.tags(articles[0], 0)" size="ads.sl1.size(articles[0], 0)" style="border:0px;"></div>

            <div class="sidebar-ad" ng-if="articles[0].readyForAd" dc-slot="ads.sb1.slot(articles[0], 0)"
                 tags="ads.sb1.tags(articles[0], 0)" size="ads.sb1.size(articles[0], 0)"></div>

            <div ng-if="articles[0].readyForAd && 0 > 1 && !articles[0].partner.isSponsoringArticle"
                 dc-slot="ads.sb2.slot(articles[0], 0)"
                 tags="ads.sb2.tags(articles[0], 0)" size="ads.sb2.size(articles[0], 0)"></div>

        </div>

        <article itemscope itemtype="https://schema.org/Article">
            <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
                <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
                    <meta itemprop="url"
                          content="https://dzone.com/themes/dz20/images/logo.png">
                </div>
                <meta itemprop="name"
                      content="DZone">
            </div>
            <div class="content" ng-class="{'content-full': (width <= 1024 && edition)}"
                 >
                <meta itemprop="thumbnailUrl"
                      content="//dz2cdn3.dzone.com/storage/article-thumb/12518410-thumb.jpg"/>
                <meta itemprop="url"
                      content="/articles/where-is-my-cache-architectural-patterns-for-cachi"/>
                <meta itemprop="dateCreated"
                      content="2019-09-26T13:32:02Z"/>
                <meta itemprop="keywords"
                      content="caching, architecture patterns, software architecture design, managing microservices, microservices"/>
                <meta itemprop="accessMode"
                      content="textual, visual"/>
                <meta itemprop="datePublished"
                      content="2019-09-26T13:32:02Z"/>
                <meta itemprop="author"
                      content="Rafał Leszko"/>
                <meta itemprop="dateModified"
                      content="2019-10-03T14:18:11Z"/>
                <meta itemprop="mainEntityOfPage"
                      content="https://dzone.com/articles/where-is-my-cache-architectural-patterns-for-cachi"/>
                    <div itemprop="image" itemscope itemtype="https://schema.org/ImageObject">
                        <meta itemprop="image" 
                            content="//dz2cdn3.dzone.com/storage/article-thumb/12518410-thumb.jpg"
/>
                        <meta itemprop="url" 
                            content="//dz2cdn3.dzone.com/storage/article-thumb/12518410-thumb.jpg"
>
                        <meta itemprop="width" content="370">
                        <meta itemprop="height" content="230">
                    </div>

                <div class="header">
                    <div class="header-title">
                        <div class="title" ng-if="articles[0].rawType != 'guide'">
                            <h1 class="article-title" itemprop="headline">
                                Where Is My Cache? Architectural Patterns for Caching Microservices
                            </h1>
                        </div>

                        <div class="guide-title" ng-if="articles[0].rawType == 'guide'" ng-cloak>
                            <div class="guide-intro">
                                DZone 's Guide to
                            </div>
                            <h1 class="article-title" itemprop="headline">
                                Where Is My Cache? Architectural Patterns for Caching Microservices
                            </h1>
                        </div>

                        <div class="subhead">
                            <h3 itemprop="alternativeHeadline">
                                Can you find it?
                            </h3>
                        </div>

                        <div class="publish-meta"
                             ng-if="articles[0].rawType != 'guide' && articles[0].rawType != 'whitepaper'">


    <div class="article-author-meta" >
        <a href="/users/3512084/rafalleszko.html" >
             <img data-src="https://secure.gravatar.com/avatar/730403ddf72e0af229379c1bb90ea43c?d=identicon&r=PG"                     class="avatar lazyload"
                    width="40"/>
        </a> by

        <div class="author-info">
                        <span class="author-name">
                            <a th-popup="users.profile.mini" itemprop="author"
                               popup-data="{user: 3512084}"
                               href="/users/3512084/rafalleszko.html" >
                                Rafał Leszko</a>
                        </span>

        </div>
 &middot;
    </div>
                            <span class="author-date">Sep. 26, 19</span>
                            &middot;
                                <a href="/microservices-news-tutorials-tools"
                                    id="portal-name"><span
                                            class="portal-name">Microservices
                                Zone</span></a>
                            &middot;
                                <article-type type="'analysis'"></article-type>
                        </div>

                        <div class="publish-meta" ng-if="articles[0].rawType == 'whitepaper'" ng-cloak>
                            Free Resource
                        </div>

                    </div>
                </div>
                    <div class="obsolete-warning" ng-if="article.isOld" ng-cloak>
                        <old-warning-message time="article.articleDate" body="daysOldBody" type="article.rawType"
                                             title="daysOldTitle"></old-warning-message>
                    </div>

                <div class="author-n-useraction">
                    <div class="like action">
                        <dz-like template="like-article.html"
                                 node="articles[0]">        <div class="dz-like"
             

<a href="#">
    <i ng-class="{'icon-thumbs-up-alt': status.liked, 'icon-thumbs-up liked': !status.liked}"></i>
    <span>Like (27)</span>
</a>
</div>

                            </dz-like>
                    </div>

                    <div class="comment action">
                        <p ng-show="!articles[0].isLocked" slider-toggle="commentsSlider"
                           slider-data="{parent: articles[0]}"
                           activate-with-url-params="{showComments: articles[0].id}">
                            <span><i class="icon-comment"
                                     tooltip-html-unsafe="{{ commentTooltip(articles[0]) }}"></span></i>
                            Comment (<span class="comment-after number-of-comments" itemprop="commentCount"
                                           ng-bind="articles[0].nComments">3</span>)
                        </p>
                        <p ng-show="articles[0].isLocked">
                <span ng-cloak><i class="icon-icon-comment comment-disabled"
                                  tooltip-html-unsafe="Comments have been disabled for this article"></i></span>
                        </p>
                    </div>

                    <div class="save action">
                        <dz-save template="link-article-save.html" node="articles[0]"
                                 class="save">    <div class="save icon-star-empty"
         ><span
                class="action-label">Save</span></div>

                            </dz-save>
                    </div>

                    <div class="tweet action"><a ng-href="#"
                                                 ng-click='shareTwitter($event, articles[0].header.title, articles[0].url)'
                                                 class="title" target="_blank"><span><i class="icon-twitter"></i></span>
                            <span class="action-label">Tweet</span></a>
                    </div>

                    <div class="pull-right">
                        <div class="article-views action" ng-cloak><i class="icon-eye"></i> {{ articles[0].views |
                            formatCount}}

                            <span class="action-label">Views</span>
                        </div>

                            <div class="user-n-admin-action action" ng-if="canEdit(articles[0]) || canDelete(articles[0])">
                                <div class="mod-tools" dropdown is-open="dropdown.open" ng-cloak>
                            <span dropdown-toggle>
                                <i class="icon-cog"></i>
                            </span>
                                    <ul class="dropdown-menu">
                                        <li><a ng-if="canEdit(articles[0])"
                                               ng-href="/content/{{ articles[0].id }}/edit.html">Edit</a>
                                        </li>
                                        <li><a href="#" ng-if="canDelete(articles[0])"
                                               ng-click="delete(articles[0])">Delete</a>
                                        </li>
                                        <li><a href="#" ng-if="perms.canPublish"
                                               ng-click="toggleComments(articles[0])">{{ articles[0].isLocked
                                                ? 'Enable' : 'Disable' }} comments</a></li>
                                        <li><a href="#" ng-if="perms.canPublish && !articles[0].isLocked"
                                               ng-click="toggleLimitComments(articles[0])">
                                                {{ articles[0].isLimited ? 'Remove comment limits' : 'Enable moderated
                                                comments' }}
                                            </a></li>

                                    </ul>
                                </div>
                            </div>
                    </div>
                </div>
                    <div class="signin-prompt">
                        <p>Join the DZone community and get the full member experience.</p>
                        <a id="article-signin-prompt" href="#" ng-click="loginForm()">Join For Free</a>
                    </div>
                    <div class="arrow-down"></div>

         <div class="article-bumper  article-bumper-top" ng-if="articles[0].readyForAd" dc-slot="ads.bt1.slot(articles[0], 0)"
                 tags="ads.bt1.tags(articles[0], 0)" size="ads.bt1.size(articles[0], 0)"></div>


                <div ng-if="!edition || (articles[0].rawType != 'refcard' && articles[0].rawType != 'guide')">
                    <div class="content-html" dz-code-container
                         ng-non-bindable
                         itemprop="text">
                    <p pid="96"><img alt="Architectural Pattern." class="fr-fin fr-dib" src="/storage/temp/12518378-this-is-one-type-of-patterned-architecture.jpeg" title="Architectural Pattern." width="400" /></p> 
<figcaption style="text-align:center"> 
 <em>An example of an architectural pattern.</em> 
 <em></em> 
 <p><br /></p> 
</figcaption> 
<p pid="48">I’m sure you use caching somewhere in your system. This can be either to improve performance, reduce backend load, or to decrease downtime. Everybody uses caching. Caching is everywhere. However, in which part of your system should it be placed? If you look at the following diagram representing a simple microservice architecture, where would you draw the “cache” rectangle?</p> 
<blockquote pid="97">
  You may also like: 
 <a href="https://dzone.com/articles/rolling-upgrade-hazelcast-imdg-on-kubernetes" rel="nofollow">Rolling Upgrade Hazelcast IMDG on Kubernetes</a> 
</blockquote> 
<p pid="49"><img alt="" class="fr-fin fr-dib" data-loaded="true" data-src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-800x388.png" data-srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-800x388.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-400x194.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-768x373.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-170x83.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-1000x485.png 1000w" height="291" sizes="(max-width: 600px) 100vw, 600px" src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-800x388.png" srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-800x388.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-400x194.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-768x373.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-170x83.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-1000x485.png 1000w" width="600" /></p> 
<p pid="50">There is more than one right answer to this question. You could place the cache inside each service or as a completely separate cache server. You could also put it in front of each service, or even as a sidecar container that belongs to the service — there are many options. I’ve already mentioned some of them in the <a href="https://hazelcast.com/blog/hazelcast-sidecar-container-pattern/" target="_blank" rel="nofollow">Hazelcast Sidecar Container Pattern</a> blog post. Here, let’s summarize all the options you have in the microservice world and describe <strong>Caching Architectural Patterns</strong>.</p> 
<h2>Pattern 1: Embedded</h2> 
<p pid="51"><img alt="" class="fr-fin fr-dib" data-loaded="true" data-src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-400x243.png" data-srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-400x243.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-768x467.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-800x487.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-170x103.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-1000x609.png 1000w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1.png 1520w" height="243" sizes="(max-width: 400px) 100vw, 400px" src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-400x243.png" srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-400x243.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-768x467.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-800x487.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-170x103.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1-1000x609.png 1000w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-1.png 1520w" width="400" /></p> 
<p pid="52">The simplest possible caching pattern is <strong>Embedded Cache</strong>. In the diagram above, the flow is as follows:</p> 
<ol> 
 <li><strong>The request</strong> comes into the <strong>Load Balancer.</strong></li> 
 <li><strong>Load Balancer</strong> forwards the request to one of the <strong>Application</strong> services.</li> 
 <li><b>The application</b> receives the request and checks if the same request was already executed (and stored in the cache) 
  <ul> 
   <li>If yes, then return the cached value.</li> 
   <li>If not, then perform the long-lasting business operation, store the result in the cache, and return the result.</li> 
  </ul></li> 
</ol> 
<p pid="53">This long-lasting business operation can be anything worth caching; for example, performing a computation, querying a database, or calling an external web service.</p> 
<p pid="54">Such caching logic is very simple and we could quickly write code for it, either using built-in data structures or some caching libraries (like Guava cache). We could also place the cache in the application layer and use the caching capabilities provided by most web frameworks. For example, in the case of Spring, adding a caching layer requires nothing more than adding the&nbsp;<code>@Cacheable</code>&nbsp;annotation to the method.</p> 
<pre><code lang="text/x-java">@Service
public class BookService {
    @Cacheable(&quot;books&quot;)
    public String getBookNameByIsbn(String isbn) {
        return findBookInSlowSource(isbn);
    }
}</code></pre> 
<p pid="55">With this implementation, every time the <code>getBookNameByIsbn(String isbn)</code> method is called, Spring first checks if this method was already executed with the given <code>isbn</code> parameter. If yes, then the cached value is returned instead of executing the <code>findBookInSlowSource(String isbn)</code> method. You can find the complete code for this example <a href="https://github.com/leszko/caching-patterns/tree/master/src/main/java/com/leszko/cachingpatterns/pattern1" rel="nofollow">here</a>.</p> 
<p pid="56"><br /></p> 
<p pid="57">There is one issue with the embedded cache approach. Imagine that there is a request made to our system, and the first time it’s forwarded to the application service on the top. Then, the same request comes in, but this time the load balancer forwards it to the application service on the bottom. Now, we received the same request twice but had to perform the business logic twice, since the two caches on the diagram are completed separately. Let’s improve the pattern and use a distributed cache library.</p> 
<h2>Pattern 1.5: Embedded Distributed</h2> 
<p pid="58"><img alt="" class="fr-fin fr-dib" data-loaded="true" data-src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-800x284.png" data-srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-800x284.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-400x142.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-768x273.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-170x60.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-1000x355.png 1000w" height="185" sizes="(max-width: 520px) 100vw, 520px" src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-800x284.png" srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-800x284.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-400x142.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-768x273.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-170x60.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-1-2-1000x355.png 1000w" width="520" /></p> 
<p pid="59"><strong><a href="https://dzone.com/articles/process-caching-vs-distributed" rel="nofollow">Embedded Distributed Cache</a></strong> is still the same pattern as <strong>Embedded Cache</strong>; however, this time we’ll use Hazelcast instead of the default non-distributed cache library. From now on, all caches (embedded in all applications) form one distributed caching cluster. Since Hazelcast is written in Java, you can use it together with Spring; all you need to do is add the following <code>CacheManager</code> configuration.</p> 
<pre><code lang="text/x-java">@Configuration
public class CacheConfiguration {
    @Bean
    CacheManager cacheManager() {
        return new HazelcastCacheManager(Hazelcast.newHazelcastInstance());
    }
}</code></pre> 
<p pid="60"><br /></p> 
<p pid="61">With these few lines of code, we made Spring use Hazelcast for all of the caching functionalities it provides. You can check the complete implementation of this example <a href="https://github.com/leszko/caching-patterns/tree/master/src/main/java/com/leszko/cachingpatterns/pattern1plus" target="_blank" rel="nofollow">here</a>.</p> 
<p pid="62">Using an embedded cache (both distributed and non-distributed) is simple because it does not require any additional configuration or deployment. What’s more, you always get the low-latency data transfer, because the cache runs physically in the same JVM. We’ll have a closer look at the pros and cons of this solution later. Now let’s now move on to a completely different caching pattern, <strong>Client-Server</strong>.</p> 
<h2>Pattern 2: Client-Server</h2> 
<p pid="63"><img alt="" class="fr-fin fr-dib" data-loaded="true" data-src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-400x123.png" data-srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-400x123.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-768x237.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-800x246.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-170x52.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-1000x308.png 1000w" height="185" sizes="(max-width: 600px) 100vw, 600px" src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-400x123.png" srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-400x123.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-768x237.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-800x246.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-170x52.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-1-1000x308.png 1000w" width="600" /></p> 
<p pid="64">This time, the flow presented on the diagram is as follows:</p> 
<ol> 
 <li><strong>The request</strong> comes into the <strong>Load Balancer</strong> and is forwarded to one of the <strong>Application</strong> services</li> 
 <li><strong>The application</strong> uses cache client to connect to <strong>Cache Server</strong></li> 
 <li>If there is no value found, then perform the usual business logic, cache the value, and return the response</li> 
</ol> 
<p pid="65">This architecture looks similar to <a href="https://dzone.com/articles/big-database-2-database-architecture" rel="nofollow">classic database architecture</a>. We have a central server (or more precisely a cluster of servers) and applications connect to that server. If we were to compare the <strong>Client-Server</strong> pattern with <strong>Embedded Cache</strong>, there are two main differences:</p> 
<ul> 
 <li>The first one is that the Cache Server is a separate unit in our architecture, which means that we can manage it separately (scale up/down, backups, security). However, it also means that it usually requires a separate Ops effort (or even a separate Ops team).</li> 
 <li>The second difference is that the application uses a cache client library to communicate with the cache and that means that we’re no longer limited to JVM-based languages. There is a well-defined protocol, and the programming language of the server part can be different than the client part. That is actually one of the reasons why many caching solutions, such as Redis or Memcached, offer only this pattern for their deployments.</li> 
</ul> 
<p pid="66">If you’re interested in seeing this pattern in action, then the simplest way is to start a Hazelcast Cache server on Kubernetes using Hazelcast Helm Chart with the following command:</p> 
<pre><code lang="text/x-java">$ helm install hazelcast/hazelcast</code></pre> 
<p pid="67">Then, you can use the <a href="https://github.com/leszko/caching-patterns/tree/master/src/main/java/com/leszko/cachingpatterns/pattern2" rel="nofollow">following example</a> to run the client application. The most interesting part is the Spring cache configuration, which looks as follows:</p> 
<pre><code lang="text/x-java">@Configuration
public class CacheConfiguration {
    @Bean
    CacheManager cacheManager() {
        ClientConfig clientConfig = new ClientConfig();
        clientConfig.getNetworkConfig().getKubernetesConfig()
            .setEnabled(true);
        return new HazelcastCacheManager(HazelcastClient
                           .newHazelcastClient(clientConfig));
    }
}</code></pre> 
<p pid="68">As you can see, all we have to configure is to specify the Hazelcast client configuration; all the rest is done automatically.</p> 
<p pid="69">I mentioned before that the first difference between an <strong>Embedded</strong> cache and a <strong>Client-Server</strong> cache is that the former is managed separately. A separate Ops team can even manage it, or you could go even further and move the management part into the <strong>Cloud</strong>.</p> 
<h2>Pattern 2.5: Cloud</h2> 
<p pid="70"><img alt="" class="fr-fil fr-dib" data-loaded="true" data-src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-400x124.png" data-srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-400x124.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-768x239.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-800x249.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-170x53.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-1000x311.png 1000w" height="186" sizes="(max-width: 600px) 100vw, 600px" src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-400x124.png" srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-400x124.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-768x239.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-800x249.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-170x53.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-2-2-1000x311.png 1000w" width="600" /></p> 
<p pid="71">In terms of the architecture, <strong>Cloud</strong> is like <strong>Client-Server</strong>, with the difference being that the server part is moved outside of your organization and is managed by your cloud provider, so you don’t have to worry about all of the organizational matters.</p> 
<p pid="72">If you are interested in an example, you can create a Hazelcast cluster on the <strong>Hazelcast Cloud</strong> platform at <a href="https://cloud.hazelcast.com/" rel="nofollow">https://cloud.hazelcast.com/</a>. Then, you can find a complete client application <a href="https://github.com/leszko/caching-patterns/tree/master/src/main/java/com/leszko/cachingpatterns/pattern2plus" rel="nofollow">here</a>. The most interesting part is the Spring configuration:</p> 
<pre><code lang="text/x-java">@Bean
CacheManager cacheManager() {
    ClientConfig clientConfig = new ClientConfig();
    clientConfig.getNetworkConfig().getCloudConfig()
        .setEnabled(true)
        .setDiscoveryToken(&quot;KSXFDTi5HXPJGR0wRAjLgKe45tvEEhd&quot;);
    clientConfig.setGroupConfig(new GroupConfig(&quot;test-cluster&quot;, &quot;b2f9845&quot;));

    return new HazelcastCacheManager(
        HazelcastClient.newHazelcastClient(clientConfig));
}</code></pre> 
<p pid="73">Using the <strong>Client-Server</strong> pattern is simple, and using the <strong>Cloud</strong> pattern is even simpler. Both of them bring similar benefits like separating cache data from the application, separate management (scaling up/down, backups), and the possibility to use any programming language. Nevertheless, one thing becomes more difficult—the <strong>latency</strong>. In the case of the <strong>Embedded</strong> pattern, the cache was always located on the same machine (even in the same JVM) as the application. However, when the server part is detached, we now need to think about its physical location. The best option is to use the same local network (or the same VPC in case of Cloud solutions).</p> 
<p pid="74">The first two architectural patterns, <strong>Embedded</strong> and <strong>Client-Server</strong>, may sound obvious because these ideas are quite old. Now, let’s move to a new and slightly more unusual pattern, the <strong>Cache as a Sidecar</strong>.</p> 
<h2>Pattern 3: Sidecar</h2> 
<p pid="75"><img alt="" class="fr-fin fr-dib" data-loaded="true" data-src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-400x207.png" data-srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-400x207.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-768x397.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-800x413.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-170x88.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-1000x516.png 1000w" height="299" sizes="(max-width: 580px) 100vw, 580px" src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-400x207.png" srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-400x207.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-768x397.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-800x413.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-170x88.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-3-1000x516.png 1000w" width="580" /></p> 
<p pid="76">The diagram above is Kubernetes-specific because the <strong>Sidecar</strong> pattern is mostly seen in (but not limited to) Kubernetes environments. In Kubernetes, a deployment unit is called a POD. This POD contains one or more containers that are always deployed on the same physical machine. </p> 
<p pid="76">Usually, a POD contains only one container with the application itself. However, in some cases, you can include not only the application container but some additional containers which provide additional functionalities. These containers are called sidecar containers.</p> 
<p pid="77">This time, the flow looks as follows:</p> 
<ol> 
 <li><strong>The request</strong> comes to the <strong>Kubernetes Service</strong> (Load Balancer) and is forwarded to one of the <strong>PODs.</strong></li> 
 <li><strong>The request</strong> comes to the <strong>Application Container</strong> and <strong>Application</strong> uses the cache client to connect to the <strong>Cache Container</strong> (technically Cache Server is always available at <code>localhost</code>).</li> 
</ol> 
<p pid="78">This solution is a mixture of <strong>Embedded</strong> and <strong>Client-Server</strong> patterns. It’s similar to <strong>Embedded Cache</strong>, because:</p> 
<ul> 
 <li>The cache is always at the same machine as the application (low latency).</li> 
 <li>Resource pool and management activities are shared between cache and application.</li> 
 <li>Cache cluster discovery is not an issue (it’s always available at <code>localhost</code>).</li> 
</ul> 
<p pid="79">It’s also similar to the <strong>Client-Server</strong> pattern, because:</p> 
<ul> 
 <li>An application can be written in any programming language (it uses the cache client library for communication).</li> 
 <li>There is some isolation of the cache and application.</li> 
</ul> 
<p pid="80">This time, the Spring configuration would look as follows:</p> 
<pre><code lang="text/x-java">@Bean
CacheManager cacheManager() {
    ClientConfig clientConfig = new ClientConfig();
    clientConfig.getNetworkConfig().addAddress(&quot;localhost:5701&quot;);
    return new HazelcastCacheManager(HazelcastClient
                              .newHazelcastClient(clientConfig));
}</code></pre> 
<p pid="94"><br /></p> 
<p pid="81">If you’re interested in more details of how Hazelcast works as a sidecar container, please read the <a href="https://hazelcast.com/blog/hazelcast-sidecar-container-pattern/" target="_blank" rel="nofollow">Hazelcast Sidecar Container Pattern</a> blog. Now let's discuss a completely different pattern, the <strong>Reverse Proxy</strong>.</p> 
<h2>Pattern 4: Reverse Proxy</h2> 
<p pid="82"><img alt="" class="fr-fin fr-dib" data-loaded="true" data-src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-400x154.png" data-srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-400x154.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-768x295.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-800x307.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-170x65.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-1000x384.png 1000w" height="173" sizes="(max-width: 450px) 100vw, 450px" src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-400x154.png" srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-400x154.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-768x295.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-800x307.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-170x65.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-1-1000x384.png 1000w" width="450" /></p> 
<p pid="83">So far, in each scenario, the application was aware that it uses a cache. This time, however, we put the caching part in front of the application, so the flow looks as follows:</p> 
<ol> 
 <li><strong>The request</strong> comes into the <strong>Load Balancer.</strong></li> 
 <li><strong>Load Balancer </strong>checks if such a request is already cached.</li> 
 <li>If yes, then the response is sent back and the request is not forwarded to the <strong>Application.</strong></li> 
</ol> 
<p pid="84">Such a caching solution is based on the protocol level, so in most cases, it’s based on HTTP, which has some good and bad implications:</p> 
<ul> 
 <li>The good thing is that you can specify the caching layer as a configuration, so you don’t need to change any code in your application.</li> 
 <li>The bad thing is that you cannot use any application-based code to invalidate the cache, so the invalidation must be based on timeouts (and standard HTTP TTL, ETag, etc.).</li> 
</ul> 
<p pid="85"><strong>NGINX</strong> provides a mature reverse proxy caching solution; however, data kept in its cache is not distributed, not highly available, and the data is stored on disk.</p> 
<p pid="86">One improvement we could do to the <strong>Reverse Proxy</strong> pattern is to inject the HTTP Reverse Proxy as a sidecar. Here’s how you can do it:</p> 
<h2>Pattern 4.5: Reverse Proxy Sidecar</h2> 
<p pid="87"><img alt="" class="fr-fin fr-dib" data-loaded="true" data-src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-400x213.png" data-srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-400x213.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-768x408.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-800x425.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-170x90.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-1000x531.png 1000w" height="303" sizes="(max-width: 570px) 100vw, 570px" src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-400x213.png" srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-400x213.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-768x408.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-800x425.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-170x90.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-1000x531.png 1000w" width="570" /></p> 
<p pid="88">Again, when it comes to the sidecar, the diagram is limited to the Kubernetes environment. The flow looks as follows:</p> 
<ol> 
 <li><strong>The request</strong> comes into the <strong>Kubernetes Service</strong> (Load Balancer) and is forwarded to one of the <strong>PODs.</strong></li> 
 <li>Inside the <strong>POD</strong>, it’s the <strong>Reverse Proxy Cache Container</strong> (not <strong>Application Container</strong>) that receives the <strong>Request.</strong></li> 
 <li><strong>Reverse Proxy Cache Container</strong> checks if such a request is already cached.</li> 
 <li>If yes, then it sends the cached response (and does not even forward the <strong>Request </strong>to <strong>Application Container</strong>).</li> 
</ol> 
<p pid="89"><strong>Application Container</strong> is not even aware that the cache exists. Think about the microservice system presented at the beginning of this blog post. With this pattern, we could look at the whole system and specify (in the Kubernetes configuration file) that&nbsp;<code>Service 2 v1</code>&nbsp;and <code>Service 1</code>&nbsp;should be cached.</p> 
<p pid="90"><img alt="" class="fr-fin fr-dib" data-loaded="true" data-src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-400x198.png" data-srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-400x198.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-768x380.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-800x396.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-170x84.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-1000x495.png 1000w" height="297" sizes="(max-width: 600px) 100vw, 600px" src="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-400x198.png" srcset="https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-400x198.png 400w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-768x380.png 768w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-800x396.png 800w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-170x84.png 170w, https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/Pattern-4-2-2-1000x495.png 1000w" width="600" /></p> 
<p pid="91">The whole idea of changing the system in a declarative manner (without modifying the source code of each service) is very similar to the concept of <strong>Istio</strong> (and <strong>Service Mesh</strong> in general). Nevertheless, at the time of this writing, <strong>Istio</strong> does not provide caching functionality. </p> 
<p pid="91">What’s more, at the moment, there is no mature <strong>HTTP Reverse Proxy Cache Sidecar </strong>solution at all; however, I believe it will become more and more popular since a few projects are already actively working on some stable implementations. If you’re interested in the experimental version, check out <a href="https://github.com/leszko/caching-injector" rel="nofollow">Hazelcast PoC of HTTP Reverse Proxy Sidecar caching</a>.</p> 
<h2>Pros and Cons</h2> 
<p pid="92">We mentioned a lot of caching patterns that you can use in your microservice system.</p> 
<p pid="92">Here’s a handy list of the pros and cons of one table.</p> 
<table> 
 <tbody> 
  <tr> 
   <td></td> 
   <td><strong>Pros</strong></td> 
   <td><strong>Cons</strong></td> 
  </tr> 
 </tbody> 
 <tbody> 
  <tr> 
   <td><strong>Embedded (Distributed)</strong></td> 
   <td>Simple configuration and deployment <p>Low-latency data access</p><p>No separate Ops effort needed</p></td> 
   <td>Not flexible management (scaling, backup) <p>Limited to JVM-based applications</p><p>Data collocated with applications</p></td> 
  </tr> 
  <tr> 
   <td><strong>Client-Server (Cloud)</strong></td> 
   <td>Data separate from applications <p>Separate management (scaling, backup)</p><p>Programming-language agnostic</p></td> 
   <td>Separate Ops effort <p>Higher latency</p><p>Server network requires adjustment (same region, same VPC)</p></td> 
  </tr> 
  <tr> 
   <td><strong>Sidecar</strong></td> 
   <td>Simple configuration <p>Programming-language agnostic</p><p>Low latency</p><p>Some isolation of data and applications</p></td> 
   <td>Limited to container-based environments <p>Not flexible management (scaling, backup)</p><p>Data collocated with application PODs</p></td> 
  </tr> 
  <tr> 
   <td><strong>Reverse Proxy (Sidecar)</strong></td> 
   <td>Configuration-based (no need to change applications) <p>Programming-language agnostic</p><p>Consistent with containers and the microservice world</p></td> 
   <td>Difficult cache invalidation <p>No mature solutions yet</p><p>Protocol-based (e.g., works only with HTTP)</p></td> 
  </tr> 
 </tbody> 
</table> 
<h2>Conclusion</h2> 
<p pid="93">In the microservice world, there are many ways in which you can configure the cache in your system. As a rule of thumb, you should use caching only in one place. That means that you should never combine the patterns and cache in multiple layers at the same time (such as in both the HTTP and the application levels). </p> 
<p pid="93">Such an approach could lead to even more problems with cache invalidation and would make your system error-prone and difficult to debug. If you use caching in one place, then it’s your choice as to which pattern to use. The most conservative approach is the good old <strong>Client-Server</strong> (or <strong>Cloud</strong>) pattern; however, I believe that the future lies in the declarative-style <strong>HTTP Reverse Proxy Cache</strong> injection. You will probably hear about it more and more in the coming months.</p> 
<p pid="99"><br /></p> 
<h2 pid="98">Further Reading</h2> 
<p pid="100"><a href="https://dzone.com/articles/cache-or-not-to-cache" rel="nofollow">To Cache or Not to Cache?</a></p> 
<p pid="101"><a href="https://dzone.com/articles/hibernate-story-of-caching" rel="nofollow">Hibernate: Story of Caching</a></p>
                </div>
                </div>

                <div ng-if="(articles[0].rawType == 'refcard' || articles[0].rawType == 'guide') && edition" ng-cloak>
                    <div class="content-html" dz-code-container
                         itemprop="text" ng-cloak>
                        <a ng-href="{{articles[0].pdf}}">
                            <img class="pub-image" dz-image-fid-width="740" dz-image-fid="{{ articles[0].articleImage }}"
                                 width="420" itemprop="image">
                        </a>
                        <div class="pub-content content-html" ng-bind-html="article.shortDesc"></div>
                    </div>
                </div>

         <div class="article-bumper article-bumper-bottom" ng-if="articles[0].readyForAd" dc-slot="ads.bt2.slot(articles[0], 0)"
                 tags="ads.bt2.tags(articles[0], 0)" size="ads.bt2.size(articles[0], 0)"></div>



            <div class="article-bumper article-bumper-bottom" ng-if="articles[0].rawType != 'article'" ng-cloak>
            </div>

                    <div ng-if="!edition" class="related">
                        <h3>Like This Article? Read More From DZone</h3>
                        <div class="row">
                            <div class="relateddiv col-xs-6 col-md-6">
                                <a href="/articles/layered-architecture-code-smells-medium?fromrel=true">
                                    <img class="relatedimg col-xs-3 col-md-3 lazyload"
                                         data-src="https://dz2cdn3.dzone.com/thumbnail?fid=9736698&w=120" width="60"></a>
                                <a href="/articles/layered-architecture-code-smells-medium?fromrel=true"
                                   class="col-xs-9 col-md-9">Layered Architecture in Microservices</a>
                            </div>

                            <div class="relateddiv col-xs-6 col-md-6">
                                <a href="/articles/monolith-to-microservices-using-the-strangler-patt?fromrel=true">
                                    <img class="relatedimg col-xs-3 col-md-3 lazyload"
                                         data-src="https://dz2cdn3.dzone.com/thumbnail?fid=10218862&w=120" width="60"></a>
                                <a href="/articles/monolith-to-microservices-using-the-strangler-patt?fromrel=true" class="col-xs-9 col-md-9">
                                    Monolith to Microservices Using the Strangler Pattern</a>
                            </div>
                        </div>

                        <div class="row">
                            <div class="relateddiv col-xs-6 col-md-6">
                                <a href="/articles/software-architecture-the-5-patterns-you-need-to-k?fromrel=true">
                                    <img class="relatedimg col-xs-3 col-md-3 lazyload"
                                         data-src="https://dz2cdn1.dzone.com/thumbnail?fid=9613388&w=120"></a>
                                <a href="/articles/software-architecture-the-5-patterns-you-need-to-k?fromrel=true"
                                   class="col-xs-9 col-md-9">Software Architecture: The 5 Patterns You Need to Know</a>
                            </div>

                            <div class="relateddiv col-xs-6 col-md-6">
                                <a href="/refcardz/eclipse-microprofile-1?fromrel=true">
                                    <img class="relatedimg col-xs-3 col-md-3 lazyload"
                                         data-src="https://dz2cdn3.dzone.com/thumbnail?fid=12362770&w=120" width="60"></a>
                                <a href="/refcardz/eclipse-microprofile-1?fromrel=true" class="col-xs-9 col-md-9">
                                    <p class="relatedres">Free DZone Refcard</p>
                                    Eclipse MicroProfile</a>
                            </div>
                        </div>
                    </div>


            <div class="assetdiv" ng-if="articles[0].rawType != 'article' && articles[0].pdf">
                    <a class="btn-asset" ng-href="#" ng-click="loginForm()">DOWNLOAD</a>
            </div>


            <div class="article-topics">
                <div class="topic-label">Topics:</div>
                <div class="topics">
                        <span class="topics-tag">caching
                            ,</span><span class="topics-tag">architecture patterns
                            ,</span><span class="topics-tag">software architecture design
                            ,</span><span class="topics-tag">managing microservices
                            ,</span><span class="topics-tag">microservices</span>
                </div>
            </div>
            <div class="author-n-useraction">
                <div class="like action">
                    <dz-like template="like-article.html"
                             node="articles[0]">        <div class="dz-like"
             

<a href="#">
    <i ng-class="{'icon-thumbs-up-alt': status.liked, 'icon-thumbs-up liked': !status.liked}"></i>
    <span>Like (27)</span>
</a>
</div>

                        </dz-like>
                </div>

                <div class="comment action">
                    <p ng-show="!articles[0].isLocked" slider-toggle="commentsSlider" slider-data="{parent: articles[0]}"
                       activate-with-url-params="{showComments: articles[0].id}">
                        <span><i class="icon-comment" tooltip-html-unsafe="{{ commentTooltip(articles[0]) }}"></span></i>
                        Comment (<span class="comment-after number-of-comments" itemprop="commentCount"
                                       ng-bind="articles[0].nComments">3</span>)
                    </p>
                    <p ng-show="articles[0].isLocked">
            <span ng-cloak><i class="icon-icon-comment comment-disabled"
                              tooltip-html-unsafe="Comments have been disabled for this article"></i></span>
                    </p>
                </div>

                <div class="save action">
                    <dz-save template="link-article-save.html" node="articles[0]"
                             class="save">    <div class="save icon-star-empty"
         ><span
                class="action-label">Save</span></div>

                        </dz-save>
                </div>

                <div class="tweet action"><a ng-href="#"
                                             ng-click='shareTwitter($event, articles[0].header.title, articles[0].url)'
                                             class="title" target="_blank"><span><i class="icon-twitter"></i></span>
                        <span class="action-label">Tweet</span></a>
                </div>

                <div class="pull-right">
                    <div class="article-views action" ng-cloak><i class="icon-eye"></i> {{ articles[0].views |
                        formatCount}}

                        <span
                                class="action-label">Views</span></div>

                        <div class="user-n-admin-action action"
                             ng-if="!edition && (canEdit(articles[0]) || canDelete(articles[0]))">
                            <div class="mod-tools" dropdown is-open="dropdown.open" ng-cloak>
                            <span dropdown-toggle>
                                <i class="icon-cog"></i>
                            </span>
                                <ul class="dropdown-menu">
                                    <li><a ng-if="canEdit(articles[0])"
                                           ng-href="/content/{{ articles[0].id }}/edit.html">Edit</a></li>
                                    <li><a href="#" ng-if="canDelete(articles[0])" ng-click="delete(articles[0])">Delete</a>
                                    </li>
                                    <li><a href="#" ng-if="perms.canPublish"
                                           ng-click="toggleComments(articles[0])">{{ articles[0].isLocked
                                            ? 'Enable' : 'Disable' }} comments</a></li>
                                    <li><a href="#" ng-if="perms.canPublish && !articles[0].isLocked"
                                           ng-click="toggleLimitComments(articles[0])">
                                            {{ articles[0].isLimited ? 'Remove comment limits' : 'Enable moderated
                                            comments'
                                            }}</a></li>
                                </ul>
                            </div>
                        </div>
                </div>
            </div>
                <div class="attribution">
                    <p >Published at DZone with permission
                        of 
                            <span itemprop="author">Rafał Leszko
                        . <span ng-if="articles[0].source"><a
                                    href="https://hazelcast.com/blog/architectural-patterns-for-caching-microservices/"
                                     target="_blank">See the original article here.<i
                                        class="icon-link-ext-alt"></i></a></span></p>
                    <p>Opinions expressed by DZone contributors are their own.</p>
                </div>
            <load-article node="article || articles[0]"></load-article>
        </article>

        <div class="col-md-12 col-sm-12 col-xs-12">
            <th-if-scroll relative-to="bottom" from="-20" to="0" callback="activateB(articles[0])"></th-if-scroll>
        </div>
    </div>


<div class="layout-card widget-top-border partner-resources-block" style="width:100%;margin-bottom: 1em;">

    <div class="main-container">

        <div class="row column">
            <div class="featured-header">
                <h2>Microservices<span> Partner Resources</span></h2>
            </div>
        </div>

        <div class="row column" id="partnerresources">

        </div>
        <script>
            window.setTimeout(function () {

                function loadPartnerResourcesAsync(i) {
                    googletag.cmd.push(function () {
                        loadPartnerResources(i);
                    });
                }

                // function to define the slots needed for GAM
                function loadPartnerResources(i) {
                    googletag.defineSlot('/2916070/dz2_partner_resource_link', ['fluid'],
                        'partner-resource-' + i).addService(googletag.pubads().setTargeting("tag", "Microservices"), googletag.enableServices());
                    var partnerResourceDiv = document.createElement('div');
                    var partnerResourceScriptElement = document.createElement('script');
                    partnerResourceScriptElement.setAttribute('type', 'text/javascript');
                    partnerResourceScriptElement.appendChild(document.createTextNode(
                        'googletag.cmd.push(function (){googletag.display(\'partner-resource-' + i +
                        '\');});'
                    ));
                    partnerResourceDiv.id = 'partner-resource-' + i;
                    document.getElementById('partnerresources').appendChild(partnerResourceDiv).appendChild(
                        partnerResourceScriptElement);
                }

                for (i = 0; i <= 11; i++) {
                    // if statement to reduce NULL calls to GAM
                    if (googletag && googletag.defineSlot) {
                        loadPartnerResources(i);
                    } else {
                        loadPartnerResourcesAsync(i);
                    }

                }
                //timeout of 100 seconds since the particular part of the layout is loaded first
            }, 100);
        </script>
    </div>
</div>



        <div class="ad-silver row" ng-if="articles[1] && !articles[1].partner.isSponsoringArticle && width >= 768">
    </div>

        <div class="ad-gold row" ng-if="articles[1] && !articles[1].partner.isSponsoringArticle && width < 768">
            <div class="col-md-12">
                <div ng-if="ads.gold1.show()" dc-slot="ads.gold1.slot()" tags="ads.gold1.tags(articles[0])"
                     class="leaderboard-ad" size="ads.gold1.size()"></div>
            </div>
        </div>


</div>
<div class="articles-wrap" ng-repeat="article in articles" ng-if="$index > 0 || article.id != 2870069" ng-include="'/static/article/article.html'"></div>

<div style="clear: both;"></div>
<th-if-scroll ng-if="!isPreview" relative-to="bottom" from="-50" to="50" callback="loadMore()"></th-if-scroll>
</div></div></div><div class=" sidebar sidebarTapBar oUhbkSMadabbWQbVkcC oUhbkSMadabfWVcC" th-element="sidebar" th-element-groups="[]" ng-hide="$root.isHidden('sidebar')" data-th-element-name="sidebar" data-th-widget="sidebar.tapBar" data-widget-sidebar-tap-bar="" ng-controller="sidebar"><div class="content" ng-if="!$root.botInfo.isRenderBot" sidebar-list>
<div class=" sidebar.content" th-element="sidebar.content" th-element-groups="['sidebar']" ng-hide="$root.isHidden('sidebar.content')" data-th-element-name="sidebar.content"><div class="col-md-12 sidebarContentList5 sidebarContentList oUhbkSMaaqbcdvVkcC" th-element="sidebarContentList5" th-element-groups="['sidebar','sidebar.content']" ng-hide="$root.isHidden('sidebarContentList5')" data-th-element-name="sidebarContentList5" data-th-widget="sidebar.content.list" data-widget-sidebar-content-list="" ng-controller="sidebarContentList5"><ul class="nodes-list" dnd-list="display">

    <div class="header" ng-if="edition">
        <h3><strong>{{ editionName }}</strong></h3>
            </div>


    <li ng-repeat="node in display" id="{{::node.id}}-{{edition}}-{{$index}}" class="list-entry" ng-class="{active: isActive(node)}" sidebar-item="node"
        >
            <div ng-if="node.type != 'article' && node.type != 'ad'" class="resource {{ node.type }}">
                <div class="sidebar-content">{{ node.blurb }}</div>
            </div>
        <div class="sidebar-content ">
            <a ng-class="{badge1: edition}" data-badge="{{$index + 1}}" ng-if="node.type != 'ad'" ng-href="{{ ::node.url }}" ng-click="tap()" sidebar-click="node">
                <div class="sidebar-node-image" ng-if="edition"><img class="imageList" dz-image-fid-width="80" dz-image-fid="{{ ::node.imageUrl }}"></div>
                <div ng-class="{'sidebar-node-title' : edition}">
                    <div ng-if="node.type == 'whitepaper' || node.type == 'refcard' || node.type == 'guide'" class="sidebar-resource">Free&nbsp;{{node.type}}</div>
                    <p>{{ ::node.title }}</p>
                </div>
            </a>
        </div>
    </li>
    <th-if-scroll relative-to="bottom" from="-100" to="50" callback="loadMore()"></th-if-scroll>
    <th-loader flag="loading()" />
</ul>
</div></div></div>
<span class="tap" ng-class="{tapEdition: edition}" ng-click="tap()" ng-if="!$root.botInfo.isRenderBot">
    <i class="icon-angle-double-left left"></i>
    <i class="icon-angle-double-right right"></i>
</span>
</div><div class=" componentsSlider3 componentsSlider oUhballbvbdSaoUhM" th-element="componentsSlider3" th-element-groups="[]" ng-hide="$root.isHidden('componentsSlider3')" data-th-element-name="componentsSlider3" data-th-widget="components.slider" data-widget-components-slider="" ng-controller="componentsSlider3"><!--<i class="icon-cancel" ng-click="close()"></i>-->

<div class="background" ng-class="{open: _sliderOpen}" ng-if="_ready" ng-click="close()">
</div>

<div class="slider-outer-wrapper" ng-class="{open: _sliderOpen}">
    
    <div class="row slider-inner-wrapper" ng-if="_ready">
<div class=" componentsSlider3.widgets" th-element="componentsSlider3.widgets" th-element-groups="['componentsSlider3']" ng-hide="$root.isHidden('componentsSlider3.widgets')" data-th-element-name="componentsSlider3.widgets"><div class="col-md-12 contentCommentsSlider4 contentCommentsSlider oUhbaqbcaibvnWffWVcC" th-element="contentCommentsSlider4" th-element-groups="['componentsSlider3','componentsSlider3.widgets']" ng-hide="$root.isHidden('contentCommentsSlider4')" data-th-element-name="contentCommentsSlider4" data-th-widget="content.commentsSlider" data-widget-content-comments-slider="" ng-controller="contentCommentsSlider4"><script type="text/ng-template" id="link-article-save.html">
    <div ng-class="{'icon-star gold': status.saved, 'icon-star-empty': !status.saved}" ng-click="save()" class="save"><span class="save-title">Save</span><span ng-if="status.saved" class="d-letter">d</span></div>
</script>


<div class="comment-slider-content">

    <div class="node-info">
        <div class="comment-title">
            <h1 class="parent-title">{{ parent.title || parent.header.title}}</h1>
            <!--<a ng-if="parent.title" ng-href="{{ parent.linkSource }}">-->
            <!--<i class="icon-link-2" tooltip-html-unsafe="Permalink"></i>-->
            <!--</a>  -->
            <p ng-if="parent.tldr"  class="tldr">{{ parent.tldr }}</p>
            <h3 ng-if="parent.title" class="link-description" >{{ parent.linkDescription }}</h3>
            <a ng-if="parent.title" ng-href="{{parent.url}}" class="link-source">{{ parent.urlSource.name }}</a>
        </div>
    </div>
    <div class="author-n-article-info">
        <div class="author-avatar">
            <a ng-href="{{ parent.authors[0].url || parent.authorUrl }}">
                <img dz-image-fid-width="80" dz-image-fid="{{ parent.authors[0].avatar || parent.authorAvatar }}" class="avatar" width="40" />
            </a>
        </div>
        <div class="author-name">
            by <a th-popup="users.profile.mini" popup-data="{user: parent.authors[0].id || parent.authorId }" ng-href="{{ parent.authors[0].url || parent.authorUrl }}">{{ parent.authors[0].realName || parent.author}}
            </a>

            <div ng-if="parent.authors[0].isStaff || parent.isStaff" class="mbv-award staff-area">
                <i tooltip="Staff of DZone" class="icon-staff"></i>
            </div>

            <div ng-if="parent.authors[0].isMVB || parent.isMVB" class="mbv-award">
                <i tooltip="Most Valuable Blogger" class="icon-mvb-1"></i>
            </div>

            <div class="mvb-partner">
                <user-is-partner user="parent.authors[0].id"></user-is-partner>
            </div>

            <div class="zone-leader">
                <user-is-zone-leader user="parent.authors[0].id"></user-is-zone-leader>
            </div>

        </div>
        <div class="publish-date">
            &middot; <span class="author-date">{{ parent.articleDate | date:'MMM. dd, yyyy' }} {{ parent.linkDate | date:'MMM. dd, yyyy' }}</span>
        </div>
        <div class="portal-link">
            &middot; <a href="{{ parent.portal.url }}" id="portal-name" ng-cloak><span class="portal-name">{{ parent.portal.name }} Zone</span></a>
        </div>
    </div>
    <div class="user-actions">
        <div class="like action" ng-if="parent.title">
            <dz-like template="like-article.html" callback="addVoter()" node="parent" ng-if="parent.articleDate"></dz-like>
            <dz-like callback="addVoter()" callback="addVoter()" node="parent" ng-if="parent.linkDate"></dz-like>
        </div>

        <div class="like action" ng-if="!parent.title">
            <dz-like template="like-article.html" callback="addVoter()" node="parent"></dz-like>
        </div>


        <div class="save-article action"><dz-save template="link-article-save.html" node="parent" class="save"></dz-save></div>

        <div class="tweet action">
            <a ng-href="#" ng-click='shareTwitter($event, parent.title || parent.header.title,parent.linkSource || parent.url)' class="title" target="_blank"><i class="icon-twitter"></i>Tweet</a>
        </div>

        <div class="pull-right">
            <div class="view-count action">
                <i class="icon-eye"></i> {{ parent.views }} <span ng-if="!parent.title">Views</span><span ng-if="parent.title" class="action-label">Clicks</span>
            </div>

            <div class="user-n-admin-action action" ng-if="canEdit(parent) || canDelete(parent)">
                <div class="mod-tools" dropdown is-open="dropdown.open">
                    <span dropdown-toggle><i class="icon-cog"></i></span>
                    <ul class="dropdown-menu">
                        <li><a ng-href="/content/{{ parent.id }}/edit.html">Edit</a></li>
                        <li><a href="#" ng-if="canDelete(parent)" ng-click="deleteLink(parent)">Delete</a></li>
                        <li><a href="#" ng-if="canPublish && !parent.title" ng-click="toggleComments(parent)">{{ parent.isLocked ? 'Enable' : 'Disable' }} comments</a></li>
                        <li><a href="#" ng-if="canPublish && !parent.isLocked && !parent.title" ng-click="toggleLimitComments(parent)">
                            {{ parent.isLimited ? 'Remove comment limits' : 'Enable moderated comments' }}
                        </a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div th-defer-until="_sliderOpen">
        <!--<div content-comment-box parent="parent.id" count="parent.nComments" limited="parent.isLimited" class="comment-box"></div>-->
    </div>
</div>

</div></div>    </div>
</div>

</div>

    <div class="row">
        <a href="#" class="back-to-top"><i class="icon-up-big"></i></a>
    </div>



    <script type="text/ng-template" id="/themes/dz20/widgets/header/sections/widget.html">
<span dropdown is-open="dropdown.open" ng-class="{small: width < 768}">
    <span dropdown-toggle class="sections"><i class="icon-menu"></i>
        <span class="menuLabel" ng-if="width < 768"></span></span>
    <ul class="dropdown-menu ul-first" ng-style="width < 768 ? {'top': headerSize + 0 + 'px', 'padding-top': '15px'} : {}">
        <li><a href="/links">Links</a></li>
        <li><a href="/refcardz">Refcardz</a></li>
        <li><a href="/guides">Guides</a></li>
        <li><a href="/about">About Us</a></li>
        <li class="divider"></li>

        <li class="post-title"><span>Zones</span></li>
        <li ng-repeat="topic in portals" class="dropdown">
            <a ng-href="{{ topic.url }}">{{ topic.name }}</a>
        </li>
        <li class="divider"></li>
        <li class="post-title"><span>Post</span></li>
        <li><a href="/links">Link</a></li>
        <li><a href="/article/post.html">Article</a></li>
    </ul>
</span>


    </script>

<script type="text/ng-template" id="followus.html">
<div class="top-social">
    <p>Let's be friends:</p>
    <ul class="icons-only" ng-class="{open: isOpen}" click-outside="outside()">
        <li class="rss-icon" id="rss-spotlight-1">
            <a href="/pages/feeds"><i class="icon-rss-1"></i></a>
        </li>
        <li class="twitter-icon">
            <a href="https://twitter.com/DZoneInc" target="_blank"><i class="icon-twitter"></i></a>
        </li>
        <li class="facebook-icon">
            <a href="https://www.facebook.com/DZoneInc" target="_blank"><i class="icon-facebook-1"></i></a>
        </li>
        <li class="google-icon">
            <a href="https://plus.google.com/+dzone/posts" target="_blank"><i class="icon-gplus"></i></a>
        </li>
        <li class="linkedin-icon">
            <a href="https://www.linkedin.com/company/devada-team" target="_blank"><i class="icon-linkedin-1"></i></a>
        </li>

            <ul class="social-dropdown dropdown-menu">
                <li class="rss" id="rss-spotlight"><a href="/pages/feeds"><i class="icon-rss-squared"></i> <span>RSS Feed</span></a></li>
                <li class="twitter" id="twitter-spotlight">
                    <a href="https://twitter.com/DZoneInc" class="twitter-follow-button" data-show-count="true"
                       data-show-screen-name="false">Follow @DZoneInc</a>
                </li>
                <li class="fb-like" id="fb-spotlight" data-href="https://www.facebook.com/DZoneInc"
                    data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></li>
                <li class="google-plus" id="gplus-spotlight">
                    <div class="g-follow" data-annotation="bubble" data-height="20"
                         data-href="https://plus.google.com/108688665090780146602" data-rel="publisher"></div>
                </li>
                <li class="linkedin" id="linkedin-spotlight">
                    <script type="IN/FollowCompany" data-id="114427" data-counter="right"></script>
                </li>
            </ul>
    </ul>
</div>
</script><script type="text/ng-template" id="dzlike.html">
<div class="dz-like " ng-class="{liked: status.liked}" ng-click="like()">
    <a href="#">
        <i class="icon-up-dir"></i>
        <span>{{ status.score }}</span>
    </a>
</div>
</script><script type="text/ng-template" id="dztopicselect.html"><ui-select  ng-if="canAddTopics" ng-model="editing.topics" theme="bootstrap" multiple tagging tagging-label="(add topic)"
           tagging-tokens=",">
    <ui-select-match class="input-tags"><div class="topics-tag">{{ $item }}</div></ui-select-match>
    <ui-select-choices
            refresh="topicsRefresh($select.search)"
            refresh-delay="250"
            repeat="topic in foundTopics | filter: $select.search">
        <div ng-bind-html="topic | highlight: $select.search"></div>
    </ui-select-choices>
</ui-select>
<ui-select ng-if="!canAddTopics" ng-model="editing.topics" theme="bootstrap" multiple>
    <ui-select-match><div class="topics-tag">{{ $item }}</div></ui-select-match>
    <ui-select-choices
            refresh="topicsRefresh($select.search)"
            refresh-delay="250"
            repeat="topic in foundTopics | filter: $select.search">
        <div ng-bind-html="topic | highlight: $select.search"></div>
    </ui-select-choices>
</ui-select></script><script type="text/ng-template" id="dzsave.html"><i class="icon-star-empty" ng-class="{'icon-star gold': status.saved, 'icon-star-empty': !status.saved}" tooltip-html-unsafe="{{status.saved ? 'Saved' : 'Save'}}" ng-click="save()"></i>
<!--<span ng-class="{'gold count': status.saved}">{{ status.count }}</span>--></script><script type="text/ng-template" id="overlay.html"><div class="ngdialog th-overlay">
    <div class="ngdialog-overlay">
        <div class="overlay-box">
            <i class="icon-spin5 animate-spin"></i>

            <p>{{ message }}</p>
        </div>
    </div>
</div></script><script type="text/ng-template" id="inline-editable.html"><div class="inline-editable" ng-if="!status.editing" ng-click="edit()" ng-transclude></div>
<div class="inline-editor-wrapper" ng-if="status.editing">
    <textarea class="inline-editor" ng-model="status.editValue" ng-if="type == 'textarea'"></textarea>
    <input class="inline-editor" ng-model="status.editValue" ng-if="type == 'input'"></textarea>
    <div class="inline-editor-tools">
        <button class="btn select-ok" ng-disabled="!status.editValue" ng-click="save()"><i class="icon-check-1"></i></button>
        <button class="btn select-cancel" ng-disabled="!editable" ng-click="cancel()"><i class="icon-cancel-1"></i></button>
    </div>
</div></script><script type="text/ng-template" id="dzupload.html"><span class="btn btn-upload" >
    <div ng-bind-html="label"></div>
    <div class="progress-container" ng-style="{visibility: uploading ? 'visible' : 'hidden'}">
        <progressbar max="100" value="progress"><span>{{ progress }}</span></progressbar>
    </div>
    <input type="file" ng-file-drop ng-file-select ng-file-change="upload($files)" />
</span></script><script type="text/ng-template" id="dzfollow.html"><button class="btn btn-follow" ng-class="{'btn-success': !status.followed, 'btn-warning': status.followed, 'hidden': followed.id == $root.user.id}" ng-click="follow()"><span ng-if="!status.followed"><i class="icon-plus"></i> Follow</span><span ng-if="status.followed" class="following">Following</span><span ng-if="status.followed" class="hover">Unfollow</span></button></script><script type="text/ng-template" id="dzphoto.html"><i class="icon-camera-alt photo" type="file" ng-file-drop ng-file-select ng-file-change="upload($files)"></i></script><script type="text/ng-template" id="dialog.confirm.html"><p>{{ message }}</p></script><script type="text/ng-template" id="dialog.skeleton.html"><div class="dialog-title">
    <h1 ng-if="$dialog.title">{{ $dialog.title }}</h1>
</div>
<div class="dialog-body {{ $dialog.extraClass }}" ng-include="$dialog.template"></div>
<div class="dialog-footer">
    <div class="dialog-buttons" ng-if="$dialog.buttons">
        <button ng-repeat="button in $dialog.buttons" ng-hide="button.hidden" ng-disabled="button.disabled || $dialog.executing"
                class="btn btn-{{ button.type || 'info' }}" ng-click="$dialog.runAction(button)">
            <span class="icon-spin6 animate-spin" ng-if="button.executing"></span>{{ button.label || button.name }}</button>
    </div>
</div></script><script type="text/ng-template" id="dialog.message.html"><div class="message-icon">
    <i class="icon-{{ icon }}"></i>
</div>
<div class="message-text">
    <p class="message-title" ng-bind-html="trustAsHtml(title)"></p>
    <p ng-bind-html="trustAsHtml(message)"></p>
</div>
</script>
<script type="text/javascript">

    var TH_CORE_VARS = {};

    try {
        TH_CORE_VARS.additional = {};

        TH_CORE_VARS.additional.matchedUrl = {"name":"dzone:articles:view","mapping":"/articles/**","mappingPatterns":{}};
        TH_CORE_VARS.additional.request = [{"site":{"keywords":"programming, software development, devops, java, agile, web, iot, database, mobile, big data, cloud","name":"DZone.com","description":"Programming, Web Development, and DevOps news, tutorials and tools for beginners to experts. Hundreds of free publications, over 1M members, totally free.","id":7,"title":"DZone: Programming & DevOps news, tutorials & tools"},"dev":false,"context":"","theme":"dz20","cdn":["dz2cdn1.dzone.com","dz2cdn2.dzone.com","dz2cdn3.dzone.com","dz2cdn4.dzone.com"],"user":{"realName":null,"authenticated":false,"profile":"/users/2500002/anon-user.html","name":"Anonymous","GDPRStatus":null,"id":2500002,"avatar":"https://secure.gravatar.com/avatar/?d=identicon&r=PG"}}];
        TH_CORE_VARS.additional.loadedScripts = [["/lib/jquery/jquery.js","/lib/lodash/lodash.js","/lib/moment/moment.js","/scripts/utils.js","/lib/angular/angular.js","/lib/angular/angular-sanitize.js","/lib/local-storage/angular-local-storage.js","/lib/bootstrap/dropdown.js","/lib/angular-ui/bootstrap.js","/lib/angular-ui/select.js","/lib/bootstrap-switch/bootstrap-switch.js","/lib/ngDialog/js/ngDialog.js","/lib/angular-moment/angular-moment.js","/scripts/app.js","/scripts/socket.js","/scripts/services.js","/scripts/ui-services.js","/scripts/directives.js","/scripts/filters.js","/lib/angular/angular-cookies.js","/lib/angulartics/angulartics.js","/lib/angulartics/angulartics-ga.js","/lib/angular-touch/angular-touch.min.js","/lib/dataTables/datatables.min.js","/lib/elastic/elastic.js","/lib/ng-file-upload/angular-file-upload-all.js","/scripts/dzone.js","/scripts/ads.js","/scripts/social-media.js","/scripts/head.js","/scripts/links.js","/scripts/utilities/directives.js","/scripts/utilities/services.js","/scripts/utilities/editor.js","/lib/bootstrap-slider/bootstrap-slider.js","/lib/bootstrap-slider/directive.js","/lib/sb/sb.js","/lib/angular-draganddrop/draganddrop.js","/widgets/article/content/utils.js","/widgets/components/slider/service.js","/widgets/header/headerV2/resize.js","/widgets/sidebar/content/list/service.js","/widgets/sidebar/tapBar/directive.js","/widgets/sidebar/tapBar/service.js"]];
        TH_CORE_VARS.additional.botInfo = [{"isRenderBot":false}];
        TH_CORE_VARS.additional.portals = [[{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"agile","color":"red","name":"Agile","topic":8,"id":2,"shortTitle":"agile-methodology-training-tools-news","url":"/agile-methodology-training-tools-news"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"ai","color":"purple","name":"AI","topic":2551,"id":4001,"shortTitle":"artificial-intelligence-tutorials-tools-news","url":"/artificial-intelligence-tutorials-tools-news"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"big-data","color":"green","name":"Big Data","topic":6129,"id":3,"shortTitle":"big-data-analytics-tutorials-tools-news","url":"/big-data-analytics-tutorials-tools-news"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"cloud","color":"orange","name":"Cloud","topic":30,"id":4,"shortTitle":"cloud-computing-tutorials-tools-news","url":"/cloud-computing-tutorials-tools-news"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"database","color":"purple","name":"Database","topic":59,"id":5,"shortTitle":"database-sql-nosql-tutorials-tools-news","url":"/database-sql-nosql-tutorials-tools-news"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"devops","color":"yellow","name":"DevOps","topic":31,"id":6,"shortTitle":"devops-tutorials-tools-news","url":"/devops-tutorials-tools-news"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"integration","color":"green","name":"Integration","topic":1138,"id":7,"shortTitle":"enterprise-integration-training-tools-news","url":"/enterprise-integration-training-tools-news"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"iot","color":"orange","name":"IoT","topic":48,"id":8,"shortTitle":"iot-developer-tutorials-tools-news-reviews","url":"/iot-developer-tutorials-tools-news-reviews"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"java","color":"purple","name":"Java","topic":1,"id":1,"shortTitle":"java-jdk-development-tutorials-tools-news","url":"/java-jdk-development-tutorials-tools-news"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"microservices","color":"green","name":"Microservices","topic":13268,"id":6001,"shortTitle":"microservices-news-tutorials-tools","url":"/microservices-news-tutorials-tools"},{"hideFromHomepageWidgets":true,"hideFromNav":true,"code":"mobile","color":"yellow","name":"Mobile","topic":29,"id":9,"shortTitle":"mobile-app-developer-tutorials-tools-news","url":"/mobile-app-developer-tutorials-tools-news"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"open-source","color":"purple","name":"Open Source","topic":75,"id":7001,"shortTitle":"open-source-news-tutorials-tools","url":"/open-source-news-tutorials-tools"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"performance","color":"red","name":"Performance","topic":653,"id":10,"shortTitle":"apm-tools-performance-monitoring-optimization","url":"/apm-tools-performance-monitoring-optimization"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"security","color":"green","name":"Security","topic":85,"id":2001,"shortTitle":"application-web-network-security","url":"/application-web-network-security"},{"hideFromHomepageWidgets":false,"hideFromNav":false,"code":"webdev","color":"orange","name":"Web Dev","topic":35,"id":11,"shortTitle":"web-development-programming-tutorials-tools-news","url":"/web-development-programming-tutorials-tools-news"},{"hideFromHomepageWidgets":true,"hideFromNav":true,"code":"inspiration-station ","color":"purple","name":"Writers'","topic":16873,"id":3001,"shortTitle":"writers-zone","url":"/writers-zone"}]];
        TH_CORE_VARS.additional.loadedStyles = [["/lib/bootstrap/bootstrap.less","/lib/fontello/css/fontello.css","/lib/fontello/css/animation.css","/lib/angular-ui/select.css","/lib/ngDialog/css/ngDialog.css","/less/ngDialog-theme.less","/less/container.less","/lib/bootstrap-switch/bootstrap-switch.css","/lib/dataTables/datatables.min.css","/less/dzone20.less","/less/fonts.less","/less/directives.less","/lib/sb/sb.css","/lib/bootstrap-slider/bootstrap-slider.css","/less/layout.less","/widgets/announcementBar/widget.less","/widgets/article/content/article-content.less","/widgets/components/slider/widget.less","/widgets/content/commentsSlider/widget.less","/widgets/header/headerV2/widget.less","/widgets/sidebar/content/list/list.less","/widgets/sidebar/tapBar/sidebar-list.less","/widgets/sidebar/tapBar/widget.less"]];
        TH_CORE_VARS.additional.model = [{"metaData":{"title":"Where Is My Cache? Architectural Patterns for Caching Microservices - DZone Microservices","description":"Where Is My Cache? Architectural Patterns for Caching Microservices — embedded, distributed, client-server, cloud","keywords":"programming, software development, devops, java, agile, web, iot, database, mobile, big data, cloud,caching,architecture patterns,software architecture design,managing microservices,microservices,article","siteName":"dzone.com","url":"https://dzone.com","img":"https://dz2cdn3.dzone.com/storage/article-thumb/12518410-thumb.jpg","imgprop":"og:image","twitterImage":"https://dz2cdn3.dzone.com/storage/article-thumb/12518410-thumb.jpg","type":"article","wordCount":2259,"canonical":"https://dzone.com/articles/where-is-my-cache-architectural-patterns-for-cachi","noIndex":false,"noFollow":false,"prevPage":null,"nextPage":null,"pubDate":"2019-09-26 13:32:02.0","id":2870069,"author":"Rafał Leszko","section":"Microservices","useEscapedFragment":false,"robots":false,"robotsTag":""},"articleEdition":{"new":false,"association":null,"description":null,"creationDate":1569946624000,"creationDateFormatted":"10/01/2019 04:17 PM","type":"daily-email","random":false,"modificationDate":1569947275000,"modificationDateFormatted":"10/01/2019 04:27 PM","name":"mqueue::Weekly Digest October 2, 2019","initialized":false,"id":521353},"lastAuthor":{"id":3512084,"username":"rafal.leszko","realname":"Rafał Leszko","type":"user","plug":"rafalleszko","gold":0,"silver":1,"bronze":1,"reputation":190,"moderator":false,"superuser":false,"emailHash":"99b625c1ef51bc0d8322e4fc70536a232354004f6d1f5cee564c420f82f41965","avatar":"https://dzone.com/users/3512084/photo/view.html"},"articleType":"article/analysis","publisher":"charleighs","enableThreadedComments":true,"portal":{"id":6001,"code":"microservices","title":"Microservices","shortTitle":"microservices-news-tutorials-tools","blurb":"The Microservices Zone will take you through breaking down the monolith step-by-step and designing microservices architecture from scratch. It covers everything from scalability to patterns and anti-patterns. It digs deeper than just containers to give you practical applications and business use cases."},"contentType":"article","content":{"id":"2870069","type":"article","plug":"where-is-my-cache-architectural-patterns-for-cachi","creationDate":"2019-09-26 13:32:02.0"}}];
        TH_CORE_VARS.additional.requiresModule = ["dndLists","generalDirectives","monospaced.elastic","angularFileUpload","ui.bootstrap-slider","angulartics","angulartics.google.analytics","ngCookies","ngSanitize","ui.select","ui.bootstrap","angularMoment","ngTouch","ngDialog","LocalStorageModule"];
        TH_CORE_VARS.additional.TH_CSRF = "934307639459531258";
            } catch (e) {
        console.error(e);
    }
</script>

<script type='text/javascript'>
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    (function () {
        var gads = document.createElement('script');
        gads.async = true;
        gads.type = 'text/javascript';
        var useSSL = 'https:' == document.location.protocol;
        gads.src = (useSSL ? 'https:' : 'http:') +
                '//www.googletagservices.com/tag/js/gpt.js';
        var node = document.getElementsByTagName('script')[0];
        node.parentNode.insertBefore(gads, node);
    })();
</script>

<script type="text/javascript" src="//dz2cdn2.dzone.com/storage/pub/12525406-combined.js" charset="utf-8"></script><script type="text/javascript" src="//dz2cdn2.dzone.com/storage/pub/12405530-combined.js" charset="utf-8"></script><script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-410289-1', 'auto');
    ga('require', 'linkid', 'linkid.js');
    ga('require', 'GTM-TSD9TZP');
    ga('set', 'siteSpeedSampleRate', 25);
    //ga('send', 'pageview');
</script>

<!-- Begin Inspectlet Embed Code -->
<script type="text/javascript" id="inspectletjs">
    window.__insp = window.__insp || [];
    __insp.push(['wid', 1999343779]);
    (function () {
        function __ldinsp() {
            var insp = document.createElement('script');
            insp.type = 'text/javascript';
            insp.async = true;
            insp.id = "inspsync";
            insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js';
            var x = document.getElementsByTagName('script')[0];
            x.parentNode.insertBefore(insp, x);
        }

        if (window.attachEvent) window.attachEvent('onload', __ldinsp);
        else window.addEventListener('load', __ldinsp, false);
    })();
</script>
<!-- End Inspectlet Embed Code -->



<script src="https://cdn.optimizely.com/js/664902255.js"></script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K25QL22');</script>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K25QL22"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager -->

<script src="/themes/dz20/lib/angular-animate.min.js"></script>
<script src="/themes/dz20/lib/angular-sanitize.min.js"></script>
<script src="/themes/dz20/lib/ngToast.min.js"></script>
<script src="/themes/dz20/lib/lazysizes.min.js"></script>

<script type="text/javascript">
    (function() {
            function controller($scope, TH$Dialog, $location, $rootScope, $timeout, TH$SharedVars, $service, TH$LocalStorage) {

    $scope.searchT ='';

    TH$SharedVars.bind($scope, 'searchT', 'searchTerm', true);

    $scope.login = function() {
        TH$Dialog.open({
            loadWidget: 'users.loginForm',
            size: 'modalForm',
            showClose: true
        });
    };

    $scope.signIn = function() {
        TH$Dialog.open({
            loadWidget: 'users.registration',
            size: 'modalFormExtended',
            showClose: true
        });
    };

    $scope.allResults = function() {
        window.location='/search';
    };

    $("#search").keyup(function(e) {
        var length = ($scope.searchT ? $scope.searchT.length : 0);
        $scope.searchT = ($scope.searchT ? $scope.searchT : '');

        if (e.keyCode === 13 && length > 2) {
            $scope.allResults();
        } else {
            $scope.search();
        }
    });

    $scope.focusSearch = function() {
        $timeout(function() {
            $("#search").focus();
        }, 100)
    };

    $scope.search = function() {
        var length = ($scope.searchT ? $scope.searchT.length : 0);
        $scope.loading = (length > 2);
        if (length < 3) {
            if ($scope.nodes || $scope.nodes == []) {
                $timeout(function() {
                    $scope.nodes = [];
                    $scope.cType = [];
                    $scope.related = [];
                    $scope.pager = [];
                    $scope.searchParam = [];
                    $scope.totalResults = null;

                }, 100)
            }
            return false;
        }

        var term = $scope.searchT;
        if ($scope.prevTerm == term) {
            return;
        }

        $scope.prevTerm = term;

        TH$LocalStorage.value('searchValue', term);
        term = (term ? term : '');
        $service.nextPage({term: term, pageSize: 7}, null, true).then(function(data) {
            $scope.loading = false;
            var curPage = 1;
            $scope.nodes = data.pages.newest[curPage];
            $scope.haveResults = ($scope.nodes) ? true : false;
            $scope.totalResults = data.totalItems;
        });
    }
}

            var WMODEL_DATA = {};
            WMODEL_DATA.isAdmin = false;
        WMODEL_DATA.getPortals = null;
        WMODEL_DATA.OPTIONS = {};
        WMODEL_DATA.user = {"karma":40,"country":null,"website":null,"city":null,"about":null,"avatar":"https://secure.gravatar.com/avatar/?d=identicon&r=PG","realName":"$$ANON_USER$$","websiteUrl":"","jobRole":null,"tagline":null,"company":null,"id":2500002,"job":null};
        TH.installWidgetController('header.headerV2', 'mainHeader', WMODEL_DATA, typeof controller == 'function' ? controller : null, [{name: 'nextPage', data: true}], ' oUhbWOfRPSwBoUhM', null);
        })();
        (function() {
            function controller($scope, TH$Service, $window, $rootScope) {
    var body = $(".body"),
        announcement = $(".announcementBar"),
        marginRight = body.css("marginRight"),
        marginLeft  = body.css("marginLeft");
    $scope.track = function(id){
        var data = {
            siteNotification : id
        };
        TH$Service.exec('dzoneUsers.trackAnnouncementBar', data).then(function(){
        });
        $window.location.href = $scope.announcement.link;
    };

    $(window).resize(function() {
        marginRight = body.css("marginRight")
        marginLeft  = body.css("marginLeft")
        $scope.setBarWidth()
    });

    if(!(announcement.next().is( ".layout-card"))) {

        announcement.css("margin-bottom", "10px");
    }

    $scope.toShow = ($scope.announcement && $scope.announcement.anononly) ?  !($rootScope.user.authenticated) : true;
    
    $scope.setBarWidth = function(){
        var container = $("#acontainer");
        container.css("margin-right", "-"+marginRight)
        container.css("margin-left", "-"+marginLeft)
    }
}

TH.directive('backImg', function(){
    return function(scope, element, attrs){
        if(attrs.hasimage == "true"){
            var img = new Image();
            img.onload = a(attrs.img, element, scope);
            img.onerror = a(attrs.imgbackup, element, scope);
            img.src = attrs.img;
        }
        scope.setBarWidth();
    };
});

var a = function(url, element){
    element.css({
        'background-image': 'url(' + url +')',
        'background-size' : 'cover'
    });
};
            var WMODEL_DATA = {};
            WMODEL_DATA.OPTIONS = {};
        WMODEL_DATA.announcement = {"id":3710031,"body":"Download DZone’s 2019 Microservices Trend Report to see the future impact microservices will have.","link":"https://dzone.com/storage/assets/12506389-dzone-trendreport-microservices.pdf?utm_source=TR&utm_medium=TopBar&utm_campaign=0919MTR&oid=0919MTRTB","title":"Read Now","img2":"/notificationImage.html?id=3710031","img":"https://dz2cdn1.dzone.com/notificationImage.html?id=3710031","hasImage":false,"anononly":false};
        TH.installWidgetController('announcementBar', 'announcementBar1', WMODEL_DATA, typeof controller == 'function' ? controller : null, null, ' oUhbYlrRaqMaoUhM', null);
        })();
        (function() {
            function controller($scope, $sce, $analytics, $service, SideBarService, TH$Dialog,$rootScope, TH$Location, $q, $window,
                    /**infoBarService,*/ DZtopicsString, shareThis, $location, TH$Service, DZHeadService, $timeout, ArticleAdsService) {

    var current = ($scope.articles && $scope.articles.length) ? $scope.articles[0] : null;
    var loading = null;
    var lastLoaded = current;
    var cache = {};


    $scope.width = $(window).width();

    $scope.voted = null;

    $scope.canDelete = function(article) {
        return article.canDelete;
    };

    $scope.canEdit = function(article) {
        return article.canEdit;
    };

    $scope.canPublish = function (article) {
        return article.canPublish;
    };

    $scope.loginForm = function () {

        TH$Dialog.open({
            loadWidget: 'users.loginForm',
            size: 'modalForm',
            showClose: true,
            data: {
                fromDownload: true
            }
        });
    };

    $scope.delete= function(article) {
        TH$Dialog.confirm("Are you sure you want to permanently delete this article?").then(function() {
            TH$Service.action('delete', {type: 'node', id: article.id}).then(function() {
                TH$Dialog.success('Article deleted');
                newArticle(article.type);
            });
        });
    };

    $scope.publish = function(article) {
        TH$Dialog.confirm("Are you sure you want to publish this article?").then(function () {
            TH$Service.action('nodes.publish', {type: 'node', id: article.id}, {}, true)
                .then(function () {
                    TH$Dialog.success('Article Published', 'Your article was successfully published');
                    article.published = true;
                }, function () {
                    TH$Dialog.error('Article not Published', 'There was an error publishing teh article');
                });
        });
    };

    $scope.shareTwitter = function($event, title, url){
        $event.preventDefault();
        $event.stopPropagation();
        var twitter = 'https://twitter.com/intent/tweet';
        var link = $location.protocol() + '://' + location.host + url;
        var ref = location.host;
        var params = '?text=' + encodeURIComponent(title) + '&url=' + link + '&ref=dzone.com&via=DZoneInc';
        var win = window.open(twitter + params, '_blank');
        win.focus();
    };

    function newArticle(type) {
        current.article = {
            body: '',
            title: '',
            image: null,
            topics: [],
            sources: [],
            notes: '',
            published: false,
            canDelete: false
        };

        current.bodyImages = [];
        setEditUrl(null, type);
    };

    function setEditUrl(id, type) {
        TH$Location.apply(function ($location) {

            var url;

            if (id) {
                if (type == 'article') {
                    url = '/content/' + id + '/edit.html';
                } else {
                    url = '/dzone/staff/' + type + (type == 'refcard' ? 'z' : 's') + '/' + id + '/edit.html';
                }
            } else {
                if (type == 'article') {
                    url = '/content/article/post.html';
                } else if (type == 'refcard'){
                    url = '/dzone/staff/' + type + 'z' + '/add.html';
                }else{
                    url = '/content/article/post.html'
                }
            }
            $timeout(function(){
                $location.path(url);
            },1000);
        });
    };

    function setCurrentInSidebar(article) {
        var title = (article.header) ? article.header.title : article.title;
        var titleEll = (article.header) ? article.header.titleEll : article.title;
        SideBarService.active = article.title ? article : {
            id: article.id,
            type: 'article',
            title:  $scope.edition ? titleEll : title,
            url: article.url,
            imageUrl: article.articleImage
        }
    }

    if (current) {
        loadPartner(current);
        loadRichSnippetData(current);
        setCurrentInSidebar(current);
        setMeta(current);
        current.fullHtml = $sce.trustAsHtml(current.articleContent);
    }

    function setMeta(current){
        var portal = (current.portal) ? current.portal.name : '';
        var keywords = (current.articleTags) ? current.articleTags.toString() : portal;
        var title = current.header ? current.header.title : current.title;

        if(!title){
            return;
        }
        DZHeadService.title = title+' - DZone '+portal;
        DZHeadService.description = current.metaDescription;
        DZHeadService.keywords = keywords;
        DZHeadService.url = $location.absUrl();
        DZHeadService.canonical = $location.protocol() + '://' + $location.host() + current.url;
        var imageLink = current.header ? current.header.imageLink : current.imageLink;
        //var imgUrl = $location.host() + imageLink;
        DZHeadService.img = imageLink;
        DZHeadService.type = current.articleType;
        DZHeadService.wordCount = current.wordCount;
    }

    function getArticle(id) {

        if (cache[id]) {
            return $q.when(cache[id]);
        } else {
            var promise =  $service({article: id});

            promise.then(function(article) {
                article.fullHtml = $sce.trustAsHtml(article.articleContent);
            });

            return promise;
        }
    }

    function loadArticleInList(id) {
        loading = id;

        if (cache[id]) {
            $scope.articles.push(cache[id]);
            lastLoaded = cache[id];
            loading = null;
        } else {
            $scope.articles.push({type: 'loader'});

            getArticle(id)
                .then(function(article) {
                    $scope.articles.pop();
                    $scope.articles.push(article);
                    lastLoaded = article;
                    loading = null;
                    cache[article.id] = article;

                    loadPartner(article);
                    loadRichSnippetData(current);
                });
        }
    }

    //$scope.imageUrlBase = $location.protocol() + "://" + $location.host();

    function loadRichSnippetData(article) {

        var rs = {
            bodyProp: 'articleBody',
            date: moment(article.articleDate).format(),
            articleType: 'https://schema.org/Article'
        };

        article.rs = rs;
    }

    var articleNumber = 1;

    function attachPartner(article, partners) {

        article.showLogo = true;

        if (!_.isNumber(partners.lastUsed)) {
            //partners.lastUsed = 0;
            toUse = partners.lastUsed
        }else{
            toUse = partners.lastUsed + 1;
        }

        if (toUse >= partners.length || !toUse) {
            toUse = 0;
        }

        if(partners){
            article.showLogo = (partners.length < 2 && articleNumber % 2) ? false : article.showLogo;
        }else{
            article.showLogo = false;
        }

        if(!articleNumber || article.partner){
            return;
        }

        article.readyForAd = true;
        article.partner = partners[toUse];
        $scope.partners.lastUsed = toUse;
        articleNumber++;
    }


    function loadPartner(article) {

        var partners = $scope.partners;

        if (!article.portalId) {
            if ($scope.portal) {
                article.portal = _.findWhere($scope.portals, {id: $scope.portal.id});
            } else {
                //_.each(article.articleTagIds, function (id) {
                //    var portal = _.findWhere($scope.portals, {topic: id});
                //
                //    if (portal) {
                //        article.portal = portal;
                //    }
                //});
            }
        } else {
            article.portal = _.findWhere($scope.portals, {id: article.portalId});
        }
        if (article.portal) {
            if (partners[article.portal.id]) {
                var _partners = partners[article.portal.id];
                _partners.lastUsed = $scope.partners.lastUsed;
                attachPartner(article, _partners);
            } else {
                $service.partners({portal: article.portal.id}).then(function(_partners) {
                    partners[article.portal.id] = _partners;
                    attachPartner(article, _partners);
                });
            }
        }

        if (article.readyForAd || article.partner) {
            article.readyForAd = true;
            return;
        }

    }

    $scope.loadMore = function() {

        if (loading) {
            return;
        }

        var next = SideBarService.findNext(lastLoaded ? lastLoaded.id : null);

        if (next) {
            loadArticleInList(next);
        }


    };

    $scope.activate = function(article) {

        if(article.type == 'loader'){
            return;
        }

        $rootScope.model.portal = article.portal;
        $scope.addShareCount(article);

        //infoBarService.setnComments(article.nComments);
        //infoBarService.setArticle(article);

        if (current && article.id == current.id) {
            return;
        }

        current = article;
        setCurrentInSidebar(article);

        TH$Location.apply(function($location) {
            $location.path(article.url);
        });

        var title = article.header ? article.header.title : article.title;

        //infoBarService.setTitle(title);
        //infoBarService.setArticle(article);
        setMeta(article);
        $timeout(function(){
            if (!article.viewTracked) {
                TH$Service.action('nodes.trackView', {type: 'node', id: article.id}, {}, true);
                article.views++;
                article.viewTracked = true;
                if (window.ga) {
                    window.ga('set', 'dimension2', article.articleType ? ('article/' + article.articleType) : 'article');
                    window.ga('set', 'dimension3', moment(article.articleDate).format('YYYY-MM-DD'));
                    window.ga('set', 'dimension4', _.indexOf($scope.articles, article));
                    window.ga('set', 'dimension5', article.zonetop || 'undefined');
                    window.ga('set', 'dimension6', article.pubPlug || 'undefined');
                    window.ga('set', 'dimension7', article.articleTags || 'undefined');
                    var lastAuthor = article.authors[article.authors.length - 1].name;
                    var lastAuthorCompany = article.authors[article.authors.length - 1].company;
                    window.ga('set', 'dimension8', lastAuthor || 'undefined');
                    window.ga('set', 'dimension9', article.partner ? article.partner.details.name : 'undefined');
                    window.ga('set', 'dimension10', lastAuthorCompany || 'undefined');
                    window.ga('set', 'dimension11', article.authors[0].claimed || 'undefined');
                }
                $analytics.pageTrack(article.url);
            }
        },0);
    };

    $scope.toggleComments = function(article) {
        if(!article.isLocked) {
            TH$Service.action('articles.lockNode', {type: 'node', id: article.id}).then(function(result) {
                if(result){
                    article.isLocked = true;
                    TH$Dialog.success('You have disabled all comments for this Article');
                }else{
                    TH$Dialog.error('error','Your requested was denied')
                }
            });
        }else {
            TH$Service.action('articles.unlockNode', {type: 'node', id: article.id}).then(function(result) {
                if(result){
                    article.isLocked = false;
                    TH$Dialog.success('You have enabled all comments for this Article');
                }else{
                    TH$Dialog.error('error','Your requested was denied')
                }
            });
        }
    };

    $scope.toggleLimitComments = function (article) {
        if (!article.isLimited) {
            TH$Service.action('articles.limitNode', {type: 'node', id: article.id}).then(function (result) {
                if (result) {
                    article.isLimited = true;
                    TH$Dialog.success('You have limited comments for this Article. Now all comments will go through moderation.');
                } else {
                    TH$Dialog.error('error', 'Your requested was denied')
                }
            });
        } else {
            TH$Service.action('articles.unlimitNode', {type: 'node', id: article.id}).then(function (result) {
                if (result) {
                    article.isLimited = false;
                    TH$Dialog.success('You removed the limits for comments on this Article');
                } else {
                    TH$Dialog.error('error', 'Your requested was denied')
                }
            });
        }
    };

    $scope.activateT = function(article) {
        $scope.activate(article);
    };

    $scope.activateB = function(article) {
        $scope.activate(article);
    };

    SideBarService.fn.onSelected = function(node) {
        $scope.articles = [];

        loadArticleInList(node.id);

        $scope.activate(node);
        $($window).scrollTop(0);
    };

    $scope.upvoteArticle = function () {

// disabled till we decide how the vote system will work

//        if (!$scope.voted) {
//            $scope.articles[0].upvote_count += 1;
//            $scope.voted = 1;
//        }else {
//            $scope.articles[0].upvote_count -= 1;
//            $scope.voted = null;
//        }
    };

    $scope.addShareCount = function(article){
//        var socials = ['linkedin', 'reddit', 'twitter'];
//        var url = $location.protocol()+'://'+$location.host()+':'+$location.port()+article.url;
//
//        socials.map( function(item) {
//
//            if(article[item] == undefined){
//
//                article[item] = shareThis.countThis(item,url, 'content').then(function(result){
//                    article[item] = result;
//                })
//            }
//        })


    };

    $scope.share = function(socialNet, url, title){
        shareThis.shareThis(socialNet, $location.protocol()+'://'+$location.host()+':'+$location.port()+url, title);
    };

    Object.size = function(obj) {
        var size = 0, key;
        for (key in obj) {
            if (obj.hasOwnProperty(key)) size++;
        }
        return size;
    };


    $scope.share = function(socialNet, url, title){
        shareThis.shareThis(socialNet, $location.protocol()+'://'+$location.host()+':'+$location.port()+url, title);
    };

    $scope.mailShareLink = function(article) {
        var title = article.header ? article.header.title : article.title;
        var link = article.header ? article.header.link : article.link;
        return 'mailto:?subject=' + encodeURIComponent(title) +  '&body=Article: ' + encodeURIComponent('https://dzone.com/' + link);
    };

    $scope.ads = ArticleAdsService($scope.edition, $scope.width);

};


            var WMODEL_DATA = {};
            WMODEL_DATA.authenticated = false;
        WMODEL_DATA.firstArticleContent = null;
        WMODEL_DATA.daysOldBody = "Technology moves quickly and this #type was published #time.  Some or all of its contents may be outdated.";
        WMODEL_DATA.isPreview = false;
        WMODEL_DATA.partners = {"lastUsed":0,"6001":[{"top":{"id":348533,"text":"<p>Ignore the hype. Learn how to reap the real benefits from microservices.</p>"},"bottom":{"id":348534,"text":"<p>Build. Deploy. Automate. Deliver.&nbsp;<a href=\"https://red.ht/2WrTDXM\">Learn how</a>&nbsp;to reap real benefits from microservices.&nbsp;</p>"},"campaign":240927,"details":{"code":"redhat","level":2,"partnerUrl":"https://www.redhat.com/en","name":"Red Hat","logo":"//dz2cdn3.dzone.com/storage/partner-logo/5959774-logo-rh-cmyk-default-1.jpg","leveldesc":"Platinum","id":110}},{"top":{"id":362531,"text":"<p>bumper1</p>"},"bottom":{"id":362532,"text":"<p>bumper2</p>"},"campaign":247919,"details":{"code":"sysdig","level":2,"partnerUrl":"https://sysdig.com/?UTM_Source=Content_Syndication&UTM_SFDC_Campaign=701f1000001cgkm&UTM_Offer=Sysdig-website&UTM_Campaign=&UTM_Medium=logo&UTM_Content=Dzone-microservices-zone&UTM_Term=&UTM_Creativeid=","name":"Sysdig","logo":"//dz2cdn2.dzone.com/storage/partner-logo/12448513-logo-sysdig-300x100.png","leveldesc":"Platinum","id":59613}},{"top":{"id":362521,"text":"<p>bumper1</p>"},"bottom":{"id":362522,"text":"<p>bumper2</p>"},"campaign":255911,"details":{"code":"outsystems","level":2,"partnerUrl":"https://www.outsystems.com/","name":"OutSystems","logo":"//dz2cdn3.dzone.com/storage/partner-logo/5246622-logo.png","leveldesc":"Platinum","id":92712}}]};
        WMODEL_DATA.edition = 521353;
        WMODEL_DATA.perms = {"canDecidePick":false,"canPublish":false};
        WMODEL_DATA.OPTIONS = {};
        WMODEL_DATA.daysOldTitle = "Heads up...this #type is old!";
        WMODEL_DATA.articles = [{"pubPlug":"charleighs","modDate":1570112291000,"articleImage":"//dz2cdn3.dzone.com/storage/article-thumb/12518410-thumb.jpg","rawType":"article","canEdit":false,"viewTracked":true,"source":"https://hazelcast.com/blog/architectural-patterns-for-caching-microservices/","accessMode":["textual","visual"],"metaDescription":"Where Is My Cache? Architectural Patterns for Caching Microservices — embedded, distributed, client-server, cloud","articleType":"analysis","draft":false,"portalId":6001,"isLocked":false,"relatedRefcard":[{"img":12362770,"id":2858208,"title":"Eclipse MicroProfile","url":"/refcardz/eclipse-microprofile-1"}],"readyForAd":true,"canPublish":false,"articleContent":"","articleTypePre":"https://schema.org/Article","canDelete":false,"likeStatus":{"score":27,"canLike":false,"liked":false},"id":2870069,"nComments":3,"views":27316,"bodyProp":"articleBody","originalSource":"https://hazelcast.com/blog/architectural-patterns-for-caching-microservices/","isOld":false,"isLimited":false,"image":"//dz2cdn3.dzone.com/storage/article-thumb/12518410-thumb.jpg","wordCount":2727,"articleTags":["caching","architecture patterns","software architecture design","managing microservices","microservices"],"canonical":"https://dzone.com/articles/where-is-my-cache-architectural-patterns-for-cachi","published":true,"url":"/articles/where-is-my-cache-architectural-patterns-for-cachi","tldr":"Can you find it?","saveStatus":{"saved":false,"count":45,"canSave":false},"deleted":false,"pdf":null,"partner":{"top":{"id":348533,"text":"<p>Ignore the hype. Learn how to reap the real benefits from microservices.</p>"},"bottom":{"id":348534,"text":"<p>Build. Deploy. Automate. Deliver.&nbsp;<a href=\"https://red.ht/2WrTDXM\">Learn how</a>&nbsp;to reap real benefits from microservices.&nbsp;</p>"},"campaign":240927,"details":{"code":"redhat","level":2,"partnerUrl":"https://www.redhat.com/en","name":"Red Hat","logo":"//dz2cdn3.dzone.com/storage/partner-logo/5959774-logo-rh-cmyk-default-1.jpg","leveldesc":"Platinum","id":110}},"relatedArticles":[{"img":9736698,"id":2324260,"title":"Layered Architecture in Microservices","url":"/articles/layered-architecture-code-smells-medium"},{"img":10218862,"id":2437376,"title":"Monolith to Microservices Using the Strangler Pattern","url":"/articles/monolith-to-microservices-using-the-strangler-patt"},{"img":9613388,"id":2294503,"title":"Software Architecture: The 5 Patterns You Need to Know","url":"/articles/software-architecture-the-5-patterns-you-need-to-k"}],"zonetop":"","publisher":{"name":"DZone","logo":"https://dzone.com/themes/dz20/images/logo.png"},"header":{"imageLink":"//dz2cdn3.dzone.com/storage/article-thumb/12518410-thumb.jpg","titleEll":"Where Is My Cache? Architectural Patterns for...","imageUrl":"//dz2cdn3.dzone.com/storage/article-thumb/12518410-thumb.jpg","link":"/articles/where-is-my-cache-architectural-patterns-for-cachi","id":2870069,"title":"Where Is My Cache? Architectural Patterns for Caching Microservices","type":"article"},"articleDate":1569504722000,"shortDesc":"<p pid=\"96\"><img alt=\"Architectural Pattern.\" class=\"fr-fin fr-dib\" src=\"/storage/temp/12518378-this-is-one-type-of-patterned-architecture.jpeg\" title=\"Architectural Pattern.\" width=\"400\" /></p>\n<figcaption style=\"text-align:center\">\n <em>An example of an architectural pattern.</em>\n <em></em>\n <p><br /></p>\n</figcaption>\n<p pid=\"48\">I’m sure you use caching somewhere in your system. This can be either to improve performance, reduce backend load, or to decrease downtime. Everybody uses caching. Caching is everywhere. However, in which part of your system should it be placed? If you look at the following diagram representing a simple microservice architecture, where would you draw the “cache” rectangle?</p>\n<blockquote pid=\"97\">\n  You may also like: \n <a href=\"https://dzone.com/articles/rolling-upgrade-hazelcast-imdg-on-kubernetes\">Rolling Upgrade Hazelcast IMDG on Kubernetes</a>\n</blockquote>\n<p pid=\"49\"><img alt=\"\" class=\"fr-fin fr-dib\" data-loaded=\"true\" data-src=\"https://3l0wd94f0qdd10om8642z9se-wpengine.netdna-ssl.com/wp-content/uploads/2019/08/introduction-1-800x388.png\"...","authors":[{"realName":"Rafał Leszko","isMVB":false,"isStaff":false,"aboutAuthor":null,"claimed":null,"name":"rafal.leszko","tagline":null,"company":"Hazelcast","id":3512084,"avatar":"https://secure.gravatar.com/avatar/730403ddf72e0af229379c1bb90ea43c?d=identicon&r=PG","isClaimed":false,"url":"/users/3512084/rafalleszko.html"}]}];
        TH.installWidgetController('article.content', 'articleContent2', WMODEL_DATA, typeof controller == 'function' ? controller : null, [{name: 'partners', data: true},{name: 'DEFAULT', data: true}], ' oUhbblYOaqbcblYOaqbcC', null);
        })();
        (function() {
            function controller($scope, $service, $location, SideBarService, $timeout) {

    if ($scope.edition) {
        $scope.date = moment($scope.editionDate).utc().format('MMM DD, YYYY');
    }

    SideBarService.ctx.pageSize = $scope.pageSize;
    SideBarService.ctx.isPreview = $scope.isPreview;
    SideBarService.ctx.mode = $scope.mode;

    SideBarService.fn.loader = $service;

    var $window = $(window);

    function checkWidth() {
        var windowsize = $window.width();
        $scope.width = windowsize;
    }
    // Execute on load
    checkWidth()
    // Bind event listener
    $(window).resize(checkWidth);


    if ($scope.edition) {
        SideBarService.ctx.edition = $scope.edition;
    }

    SideBarService.fn.scrollCheck = function() {
        $scope.$emit('thIfScrollCheck');
    };

    var currentFilter;

    $scope.$on('$locationChangeSuccess', function() {

        if (!$location.search().filter) {
            $scope.filter = 'latest';
        } else {
            $scope.filter = $location.search().filter;

            if ($scope.filter == 'latest') {
                $location.search('filter', null);
            }
        }

        if (currentFilter == $scope.filter) {
            return;
        }

        currentFilter = $scope.filter;

        SideBarService.ctx.filter = $scope.filter;
    });

    $scope.display = SideBarService.getList();

    $scope.$watchCollection(function() {
        return SideBarService.getList();
    }, function (n) {
        $scope.display = n;
    });

    $scope.isActive = SideBarService.isActive;

    $scope.isExcluded = SideBarService.isExcluded;

    $scope.loadMore = SideBarService.load;

    $scope.loading = function() {
        return SideBarService.ctx.loading;
    };

    TH.on('TapBarStatusChange', function(expanded) {
        if (expanded) {
            SideBarService.unblock();
        }
    })

}
            var WMODEL_DATA = {};
            WMODEL_DATA.mode = null;
        WMODEL_DATA.isPreview = false;
        WMODEL_DATA.editionName = "Weekly Digest October 2, 2019";
        WMODEL_DATA.editionDate = 1569947275000;
        WMODEL_DATA.pageSize = 20;
        WMODEL_DATA.edition = 521353;
        WMODEL_DATA.OPTIONS = {};
        TH.installWidgetController('sidebar.content.list', 'sidebarContentList5', WMODEL_DATA, typeof controller == 'function' ? controller : null, [{name: 'DEFAULT', data: true}], ' oUhbkSMaaqbcdvVkcC', null);
        })();
        (function() {
            function controller($scope) {
    var $window = $(window);

    function checkWidth() {
        var windowsize = $window.width();
        var $element = $('div.sidebar.sidebarTapBar');
        $scope.width = windowsize;
        if(windowsize <= 1024 && $scope.edition){
            $('.fixContentRight').removeClass('fixContentRight');
            // $element.removeClass('expanded');
            // $element.addClass('tapNotExpanded');
            $('.tap').show();
        }else if($scope.edition){
            $('.tap').hide();
            $('.mainContentRow').addClass('fixContentRight');
            $element.removeClass('tapNotExpanded');
            $element.addClass('expanded');
        }
    }
    // Execute on load
    checkWidth();
    // Bind event listener
    $(window).resize(checkWidth);
}
            var WMODEL_DATA = {};
            WMODEL_DATA.edition = 521353;
        WMODEL_DATA.slot = null;
        WMODEL_DATA.OPTIONS = {};
        TH.installWidgetController('sidebar.tapBar', 'sidebar', WMODEL_DATA, typeof controller == 'function' ? controller : null, null, ' oUhbkSMadabfWVcC oUhbkSMadabbWQbVkcC', null);
        })();
        (function() {
            function controller($scope,  shareThis, TH$Dialog, TH$Service, $location) {
    $scope.getEditUrl = function(id, type) {
        if (!type || type == 'article') {
            return '/content/' + id + '/edit.html';
        } else {
            return '/dzone/staff/' + type + (type == 'refcard' ? 'z' : 's') + '/' + id + '/edit.html';
        }
    };

    $scope.share = function(socialNet, url, title){
        shareThis.shareThis(socialNet, url, title);
    };

//    $scope.mailShareLink = function(article) {
//        return 'mailto:?subject=' + encodeURIComponent(article.header.title) +  '&body=Article: ' + encodeURIComponent('https://dzone.com/' + article.header.link);
//    };

    $scope.canDelete = function(article) {
        return article.canDelete;
    };

    $scope.canPublish = function(article) {
        return article.canPublish;
    };

    $scope.canEdit = function(article) {
        return article.canEdit;
    };

    $scope.toggleComments = function(article) {
        if(!article.isLocked) {
            TH$Service.action('articles.lockNode', {type: 'node', id: article.id}).then(function(result) {
                if(result){
                    article.isLocked = true;
                    TH$Dialog.success('You have disabled all comments for this Article');
                }else{
                    TH$Dialog.error('error','Your requested was denied')
                }
            });
        }else {
            TH$Service.action('articles.unlockNode', {type: 'node', id: article.id}).then(function(result) {
                if(result){
                    article.isLocked = false;
                    TH$Dialog.success('You have enabled all comments for this Article');
                }else{
                    TH$Dialog.error('error','Your requested was denied')
                }
            });
        }
    };

    $scope.toggleLimitComments = function (article) {
        if (!article.isLimited) {
            TH$Service.action('articles.limitNode', {type: 'node', id: article.id}).then(function (result) {
                if (result) {
                    article.isLimited = true;
                    TH$Dialog.success('You have limited comments for this Article. Now all comments will go through moderation.');
                } else {
                    TH$Dialog.error('error', 'Your requested was denied')
                }
            });
        } else {
            TH$Service.action('articles.unlimitNode', {type: 'node', id: article.id}).then(function (result) {
                if (result) {
                    article.isLimited = false;
                    TH$Dialog.success('You removed the limits for comments on this Article');
                } else {
                    TH$Dialog.error('error', 'Your requested was denied')
                }
            });
        }
    };

    $scope.shareTwitter = function($event, title, url){

        $event.preventDefault();
        $event.stopPropagation();
        var twitter = 'https://twitter.com/intent/tweet';
        var link = $location.protocol() + '://' + location.host + url;
        var ref = location.host;
        var params = '?text=' + encodeURIComponent(title) + '&url=' + link + '&ref=dzone.com&via=DZoneInc';
        var win = window.open(twitter + params, '_blank');
        win.focus();
    };

    $scope.edit = function(link) {
        TH$Dialog.open({
            loadWidget: 'links.postPreview',
            widgetArgs: {
                edit: link.id
            },
            size: 'xbig'
        }).then(function (result) {
            $scope.link.title = result.title;
            $scope.link.linkDescription = result.content;
            $scope.link.thumb = result.thumb;
            $scope.link.tags = result.topics;
        });
    };

    $scope.deleteLink = function(article) {
        var title = article.title;
        var type = 'link';
        if(article.header){
            title = (article.header.type == 'article') ? article.header.title : article.title;
            type = (article.header.type == 'article') ? 'article' : 'link';
        }
        TH$Dialog.confirm('Do you want to delete "' + title + '"?').then(function() {
            return TH$Service.action('delete', {type: type, id: article.id});
        }).then(function() {
            article.deleted = true;
        });
    };
}


            var WMODEL_DATA = {};
            WMODEL_DATA.OPTIONS = {};
        TH.installWidgetController('content.commentsSlider', 'contentCommentsSlider4', WMODEL_DATA, typeof controller == 'function' ? controller : null, null, ' oUhbaqbcaibvnWffWVcC', null);
        })();
        (function() {
            
            var WMODEL_DATA = {};
            WMODEL_DATA.name = "commentsSlider";
        WMODEL_DATA.slot = null;
        WMODEL_DATA.OPTIONS = {"name":"commentsSlider"};
        TH.installWidgetController('components.slider', 'componentsSlider3', WMODEL_DATA, typeof controller == 'function' ? controller : null, null, ' oUhballbvbdSaoUhM', null);
        })();
        </script>
    <script type="text/javascript">

        TH.installWidgetDirective('users.profile.mini', 'usersProfileMini', {"service":{"user":"="},"extra":null}, 'widget.html', '/widgets/users/profile/mini/widget.js', [{name: 'DEFAULT', data: true}], ' oUhbwfbqddOeffWVcC', null, ['widget.less']);
        
        TH.installWidgetDirective('header.sections', 'headerSections', {"service":null,"extra":null}, 'widget.html', '/widgets/header/sections/widget.js', null, ' oUhbWOfbRllbgfgpM', null, ['sections.less']);
        
        TH.installWidgetDirective('users.registration', 'usersRegistration', {"service":null,"extra":null}, 'widget.html', '/widgets/users/registration/widget.js', [{name: 'validateMail', data: false},{name: 'validateUsername', data: false}], ' oUhbwfbfZvbllfWVcC', ['/scripts/utilities/tools.js'], ['widget.less']);
        
        TH.installWidgetDirective('links.sources.mini', 'linksSourcesMini', {"service":{"link":"="},"extra":null}, 'widget.html', '', [{name: 'DEFAULT', data: true}], ' oUhbdhbqvRbefWfSC', null, ['mini.less']);
        
        TH.installWidgetDirective('assets.mini', 'assetsMini', {"service":{"asset":"="},"extra":null}, 'widget.html', '', [{name: 'DEFAULT', data: true}], ' oUhbcgvWfSoUhM', null, ['widget.less']);
        
        TH.installWidgetDirective('links.postPreview', 'linksPostPreview', {"service":{"url":"=","edit":"="},"extra":null}, 'widget.html', '/widgets/links/postPreview/widget.js', [{name: 'topics', data: true},{name: 'DEFAULT', data: true}], ' oUhbdhbnvqjXfoUhM', null, ['widget.less']);
        
        TH.installWidgetDirective('manage.revisions', 'manageRevisions', {"service":{"node":"=","body":"=","masterTemplate":"=","format":"=","mode":"="},"extra":null}, 'widget.html', '/widgets/manage/revisions/widget.js', [{name: 'DEFAULT', data: true},{name: 'revision', data: true}], ' oUhbXYVajkgpfWVcC', null, ['widget.less']);
        
        TH.installWidgetDirective('leads.addCRM', 'leadsAddCRM', {"service":null,"extra":null}, 'widget.html', '/widgets/leads/addCRM/widget.js', [{name: 'DEFAULT', data: true}], ' oUhb_ObOQnKRMnM oUhbcgvKRcgcONfPC', ['/scripts/utilities/tools.js'], ['add-crm.less','add-ref.less']);
        
        TH.installWidgetDirective('links.postV2', 'linksPostV2', {"service":null,"extra":null}, 'widget.html', '/widgets/links/postV2/widget.js', null, ' oUhbdhbnvXZqyBC', null, ['postV2.less']);
        
        TH.installWidgetDirective('users.questionForm', 'usersQuestionForm', {"service":null,"extra":null}, 'widget.html', '/widgets/users/questionForm/widget.js', null, ' oUhbwfbuglldnfWVcC', null, ['widget.less']);
        
        TH.installWidgetDirective('loading', 'loading', {"service":null,"extra":null}, 'widget.html', '/widgets/loading/widget.js', null, ' oUhbjOfQoUhM', null, ['widget.less']);
        
        TH.installWidgetDirective('refcardz.mini', 'refcardzMini', {"service":{"asset":"="},"extra":null}, 'widget.html', '', [{name: 'DEFAULT', data: true}], ' oUhbfSbmWfSoUhM', null, ['widget.less']);
        
        TH.installWidgetDirective('links.listV2', 'linksListV2', {"service":null,"extra":null}, 'widget.ftl', '/widgets/links/listV2/widget.js', [{name: 'linkData', data: true},{name: 'parseLink', data: true},{name: 'list', data: true}], ' oUhbdhbdvXVkyBC', ['directives.js','filters.js'], ['listV2.less']);
        
        TH.installWidgetDirective('users.uiPrefs', 'usersUiPrefs', {"service":null,"extra":null}, 'widget.html', '/widgets/users/uiPrefs/widget.js', null, '', null, null);
        
        TH.installWidgetDirective('users.loginForm', 'usersLoginForm', {"service":null,"extra":null}, 'widget.html', '/widgets/users/loginForm/widget.js', null, ' oUhbwfbjZcpWoUhM', null, ['widget.less']);
        
        TH.installWidgetDirective('users.noMembership', 'usersNoMembership', {"service":null,"extra":null}, 'widget.html', '/widgets/users/noMembership/widget.js', null, ' oUhbwfblaYfjhfWVcC', null, ['widget.less']);
        
        TH.installWidgetDirective('errors.general', 'errorsGeneral', {"service":null,"extra":null}, 'widget.html', '/widgets/errors/general/widget.js', null, ' oUhbfptQbfWfWVcC', null, ['widget.less']);
        
        TH.installWidgetDirective('manage.customNotifications.preview', 'manageCustomNotificationsPreview', {"service":null,"extra":null}, 'widget.html', '/widgets/manage/customNotifications/preview/widget.js', null, ' oUhbXYVMwrjrYVdgpZfnkZfnkM dLgZWBLPpWkKeXB', null, ['preview.less','/lib/froala-2/css/froala_style.min.css']);
        
        TH.installWidgetDirective('header.zonesDropdown', 'headerZonesDropdown', {"service":{"portal":"="},"extra":{"hover":"="}}, 'widget.html', '/widgets/header/zonesDropdown/widget.js', [{name: 'DEFAULT', data: true}], '', null, null);
        
        TH.installWidgetDirective('manage.customNotifications.test', 'manageCustomNotificationsTest', {"service":{"customNotification":"="},"extra":null}, 'widget.html', '/widgets/manage/customNotifications/test/widget.js', [{name: 'searchGroups', data: true},{name: 'DEFAULT', data: true},{name: 'searchUsers', data: true}], ' oUhbXYVMwrjrYVdgpcgcoUhM', null, ['widget.less']);
        
        TH.installWidgetDirective('content.commentBox', 'contentCommentBox', {"service":{"parent":"="},"extra":{"count":"=","limited":"="}}, 'widget.html', '/widgets/content/commentBox/widget.js', [{name: 'post', data: false},{name: 'edit', data: false},{name: 'DEFAULT', data: true}], ' oUhbaqbcaibevMkaqbC', null, ['comments.less']);
        
        TH.installWidgetDirective('article.listV2', 'articleListV2', {"service":null,"extra":null}, 'widget.html', '/widgets/article/listV2/widget.js', [{name: 'list', data: true},{name: 'sortCount', data: true}], ' oUhbblYOdvXKuV_VkcC', ['directives.js'], ['article-list.less']);
            </script>

</body>


